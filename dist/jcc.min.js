/*
* JCC LIBRARY
*
* Copyright 2018 Boris Kamenov boriskamenov@abv.bg, www.stx-dev.com
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jcc=new function(){this.version=function(){return"1.1.9"};var e={id:0,page:"",popups:[]};this.currentHistoryState=function(){return e},this.historyStateCopy=function(e){for(var t={id:e.id,page:e.page,popups:[]},n=0;n<e.popups.length;n++)t.popups.push(e.popups[n]);return t},this.historyStateToHash=function(e){var t="";e.page.length>0&&(t+=e.page+"|");for(var n=0;n<e.popups.length;n++)t+=e.popups[n]+"|";return"#"+t},this.now=function(){return window.performance&&window.performance.now?window.performance.now():Date.now?Date.now():(new Date).getTime()},this.parseHash=function(){return location.hash.substr(1).split("|")},this.handleHistory=function(){if(window.parent==window.top){var t=history.state,n="";if((d=(l=location.hash.substr(1)).indexOf("?"))>-1&&(n=l.substr(d),l=l.substr(0,d)),t&&t.id==e.id&&(t=null),null==t){var o=!1;if(l.indexOf("|")<0&&l.length>0){var a=document.getElementById(l);if(a)if(a.page)(m=document.getElementById(a.page.pageview().page()))&&m.page&&m.page.isLoaded()&&m.page.__unload(),a.page.isLoaded()||(a.page.__load(),"yes"==a.page.pageview().element().dataset.history?e.page=a.id:o=!0);else a.popup&&(a.popup.isVisible()||(a.popup.__show(),"yes"==a.dataset.history?e.popups.push(a.id):o=!0))}else{var i=jcc.parseHash(),s={};e.page.length>0&&(s[e.page]=e.page);for(var r=0;r<e.popups.length;r++)s[e.popups[r]]=e.popups[r];var c={};for(r=0;r<i.length;r++){var l,d;(d=(l=i[r]).indexOf("?"))>-1&&(l=l.substr(0,d)),l.length>0&&(c[l]=l)}for(var r in s){if(!c[r])if(p=document.getElementById(r))if(p.popup){p.popup.isVisible()&&p.popup.__hide(0);for(var h=0;h<e.popups.length;h++)if(e.popups[h]==r){e.popups.splice(h,1);break}}else p.page&&(p.page.isLoaded()&&p.page.__unload(),e.page==r&&(e.page=""))}for(var r in c){var p;if(!s[r])(p=document.getElementById(r))&&(p.popup&&"yes"==p.dataset.history?p.popup.isVisible()||(p.popup.__show(),e.popups.push(r)):p.page&&"yes"==p.page.pageview().element().dataset.history&&""==e.page&&(p.page.isLoaded()||(p.page.__load(),e.page=r)))}}o?setTimeout(function(){history.back()},0):(e.id++,window.history.replaceState(e,"",jcc.historyStateToHash(e)+n))}else{var u=t.id<e.id;if(e.page!=t.page){var m;(m=document.getElementById(e.page))&&m.page&&m.page.isLoaded()&&m.page.__unload(u);var g=document.getElementById(t.page);g&&g.page&&!g.page.isLoaded()&&g.page.__load(u)}var f={};for(r=0;r<e.popups.length;r++)f[e.popups[r]]=e.popups[r];var v={};for(r=0;r<t.popups.length;r++)v[t.popups[r]]=t.popups[r];for(var h in f){if(!v[h])(b=document.getElementById(h))&&b.popup&&b.popup.isVisible()&&b.popup.__hide(0,u)}for(var h in v){var b;if(!f[h])(b=document.getElementById(h))&&b.popup&&!b.popup.isVisible()&&b.popup.__show(u)}e=t}}};var t="";this.animations={none:{suffix:"none"},pop:{suffix:"pop"},fade:{suffix:"fade"},"slow-fade":{suffix:"slow-fade"},slideright:{suffix:"slideright"},slideleft:{suffix:"slideleft"},slidefade:{suffix:"slidefade"},slideup:{suffix:"slideup"},slidedown:{suffix:"slidedown"},upmenu:{suffix:"upmenu"},downmenu:{suffix:"downmenu"},leftmenu:{suffix:"leftmenu"},rightmenu:{suffix:"rightmenu"},flow:{suffix:"flow"},flip:{suffix:"flip",parentClass:"jcc-viewport-flip"},turn:{suffix:"turn",parentClass:"jcc-viewport-turn"}},this.options={alert:{theme:void 0,defaultTitle:"Message:",okText:"OK"},confirm:{theme:void 0,defaultTitle:"Confirmation needed:",yesText:"Yes",noText:"No"},prompt:{theme:void 0,defaultTitle:"Input needed:",okText:"OK",cancelText:"Cancel"},datetime:{theme:void 0,okText:"OK",nowText:"Now",cancelText:"Cancel",hourText:"h",minuteText:"min",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekDays:["Su","Mo","Tu","We","Th","Fr","Sa"],DIALOG_MODE:{DATE:1,TIME:2},overrideDefaultInputType:!1},colorpicker:{theme:void 0,okText:"OK",cancelText:"Cancel",COLOR_FORMAT:{HEX:1,RGB:2,RGBA:3},overrideDefaultInputType:!1}},this.widgets={},this.widget=function(e){this.theme=function(){var t="",n=e;do{var o=n.getAttribute("data-theme");if(o){t=o;break}}while(n!=document.body&&(n=n.parentNode));return""==t&&(t="a"),t},this.setOptions=function(t){for(var n in t)"number"!=typeof t[n]&&"string"!=typeof t[n]||(e.dataset[n]=t[n].toString());this.refresh()},this.getOption=function(t){return e.dataset[t.toString()]},this.element=function(){return e},this.refresh=function(){alert("JCC: widget.refresh() is not implemented!")},this.destroy=function(){alert("JCC: widget.destroy() is not implemented!")}},window.requestAnimationFrame||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),this.dispatchCustomEvent=function(e,t,n){var o=new CustomEvent(t,n),a=o.preventDefault;return o.preventDefault=function(){o.cancelable&&(a.apply(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}))},e.dispatchEvent(o),o},this.getViewportRect=function(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}},this.getElementRect=function(e){var t;if(e==document.body)(t={}).width=document.documentElement.offsetWidth||document.body.scrollWidth,t.height=document.documentElement.offsetHeight||document.body.scrollHeight,t.left=document.body.offsetLeft-window.pageXOffset,t.right=t.left+t.width,t.top=document.body.offsetTop-window.pageYOffset,t.bottom=t.top+t.height;else{var n=e.getBoundingClientRect();t={left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.width,height:n.height}}return t},this.getElementLocalRect=function(e){var t;if(e==document.body)(t={}).width=document.documentElement.offsetWidth||document.body.scrollWidth,t.height=document.documentElement.offsetHeight||document.body.scrollHeight,t.left=0,t.right=t.left+t.width,t.top=0,t.bottom=t.top+t.height;else{var n=e.getBoundingClientRect();t={left:0,right:n.width,top:0,bottom:n.height,width:n.width,height:n.height}}return t},this.isVisible=function(e){do{if("none"==jcc.getComputedStyle(e,"display"))return!1;if("hidden"==jcc.getComputedStyle(e,"visibility"))return!1}while(null!=(e=e.parentNode)&&e!=document.body);return!0},this.resizeMonitor=new function(){var e=[],t=!0;this.addElement=function(n){for(var o=0;o<e.length;o++)if(e[o].el==n)return void e[o].refCounter++;e.push({el:n,refCounter:1}),t&&(t=!1,function t(){for(var n=0;n<e.length;n++){var o=jcc.getElementLocalRect(e[n].el);e[n].w==o.width&&e[n].h==o.height||jcc.dispatchCustomEvent(e[n].el,"e-resized",{bubbles:!1,cancelable:!1}),e[n].w=o.width,e[n].h=o.height}setTimeout(function(){t()},0)}())},this.removeElement=function(t){for(var n=0;n<e.length;n++)if(e[n].el==t){0==--e[n].refCounter&&e.splice(n,1);break}}},this.repositionMonitor=new function(){var e=[],t=!0;this.addElement=function(n){for(var o=0;o<e.length;o++)if(e[o].el==n)return void e[o].refCounter++;e.push({el:n,refCounter:1}),t&&(t=!1,function t(){for(var n=0;n<e.length;n++){var o=jcc.getElementRect(e[n].el);e[n].left==o.left&&e[n].top==o.top||jcc.dispatchCustomEvent(e[n].el,"e-moved",{bubbles:!1,cancelable:!1}),e[n].left=o.left,e[n].top=o.top}setTimeout(function(){t()},0)}())},this.removeElement=function(t){for(var n=0;n<e.length;n++)if(e[n].el==t){0==--e[n].refCounter&&e.splice(n,1);break}}},this.getComputedStyle=function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle){var n=window.getComputedStyle(e,null);return n?n.getPropertyValue(t):e.style[t]}return e.style[t]},this.copyCss=function(e,t,n){var o={};if("string"==typeof n)o[n]=e.style[n],e.style[n]=t.style[n];else for(var a=0;a<n.length;a++){var i=n[a];o[i]=e.style[i],e.style[i]=t.style[i]}return o},this.setCss=function(e,t){var n={};for(var o in t)"string"==typeof t[o]&&(n[o]=e.style[o],e.style[o]=t[o]);return n},this.getCss=function(e,t){var n={};if("string"==typeof t)n[t]=e.style[t];else if("object"==typeof t&&t.length)for(var o=0;o<t.length;o++){var a=t[o];n[a]=e.style[a]}return n},this.preload=function(e){document.createElement("img").src=e},this.prevAll=function(e){for(var t,n=[];t=e.previousSibling;)n.push(t),e=t;return n},this.nextAll=function(e){for(var t,n=[];t=e.nextSibling;)n.push(t),e=t;return n},this.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)},this.insertAfter=function(e,t){var n=t.parentNode;n.lastchild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},this.detach=function(e){e.parentNode&&e.parentNode.removeChild(e)};var n={};this.inputTypeSupported=function(e){if("text"==(e=e.toLowerCase())||"password"==e||"checkbox"==e||"radio"==e||"submit"==e||"button"==e)return!0;if(null==n[e]){var t=document.createElement("input");t.setAttribute("type",e);t.setAttribute("value","~"),n[e]=t.type==e&&"~"!==t.value}return n[e]};var o=null;this.whatTransitionEnd=function(){if(null===o){var e=document.createElement("div"),t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"};for(var n in t)if(void 0!==e.style[n]){o=t[n];break}null===o&&(o=!1)}return o};var a=null;function i(){var e=jcc.options.datetime.theme?jcc.options.datetime.theme:document.body.dataset.theme?document.body.dataset.theme:"a",t=document.createElement("div");t.id="jcc-datetime-dialog",t.classList.add("jcc-datetime-dialog-"+e),t.dataset.role="popup",t.dataset.theme=e,t.dataset.modal="explicit",t.dataset.cancelable="yes",t.dataset.shadow="yes",t.dataset.corners="smooth",t.dataset.animation="pop",t.innerHTML='<div id="jcc-datetime-dialog-calendar" style="width:100%"><div class="jcc-datetime-dialog-header" style="position:absolute; top:5px; left:5px; right:5px; height:20px; line-height:20px; border-radius:4px; text-align:center;"><div id="jcc-datetime-dialog-bw" data-role="triangle" data-direction="left" data-solid="yes" style="position:absolute; left:0px; top:0px;"></div><h4 id="jcc-datetime-dialog-month-year" style="vertical-align:middle;margin:0;"></h4><div id="jcc-datetime-dialog-fw" data-role="triangle" data-direction="right" data-solid="yes" style="position:absolute; right:0px; top:0px;"></div></div><div style="width:100%; text-align:center; margin-top:26px;"><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-0"></div></div><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-1"></div></div><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-2"></div></div><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-3"></div></div><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-4"></div></div><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-5"></div></div><div class="weekDay"><div class="inset" id="jcc-datetime-dialog-day-6"></div></div><div id="jcc-datetime-dialog-days" style="width:100%;"></div></div></div><div id="jcc-datetime-dialog-timeselect" style="width:100%;"><div style="width:100%; text-align:center;"><div data-role="dropdown" style="width:75px; border: none;"><select id="jcc-datetime-dialog-hour"></select><div></div></div><div style="width:20px; text-align:center; font-size:16px; font-weight:bold; display:inline-block;">:</div><div data-role="dropdown" style="width:75px; border:none;"><select id="jcc-datetime-dialog-minute"></select><div></div></div></div></div><div data-role="delimiter" data-isotope="smooth-ends"></div><div style="text-align:center;"><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:33%;"><button id="jcc-datetime-dialog-button-ok"></button><span id="jcc-datetime-dialog-button-ok-text"></span></label><label data-role="button" data-isotope="quiet" data-action="yes" style="margin:1px 0px; width:33%;"><button id="jcc-datetime-dialog-button-now"></button><span id="jcc-datetime-dialog-button-now-text"></span></label><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:33%;"><button id="jcc-datetime-dialog-button-cancel"></button><span id="jcc-datetime-dialog-button-cancel-text"></span></label></div>',document.body.appendChild(t),document.getElementById("jcc-datetime-dialog-button-cancel").addEventListener("click",function(){t.popup.hide(0)},!1);for(var n=document.getElementById("jcc-datetime-dialog-hour"),o=0;o<24;o++){var a=document.createElement("option"),i=o<10?"0"+o.toString():o.toString();a.value=i,n.add(a)}var s=document.getElementById("jcc-datetime-dialog-minute");for(o=0;o<60;o++){a=document.createElement("option"),i=o<10?"0"+o.toString():o.toString();a.value=i,s.add(a)}jcc.enhance(t),jcc.datetime=function(e,o,a){for(var i=n.querySelectorAll("option"),r=0;r<i.length;r++){var c=i[r],l=r<10?"0"+r.toString():r.toString();c.text=l+" "+jcc.options.datetime.hourText}var d=s.querySelectorAll("option");for(r=0;r<d.length;r++){c=d[r],l=r<10?"0"+r.toString():r.toString();c.text=l+" "+jcc.options.datetime.minuteText}jcc.elementText(document.getElementById("jcc-datetime-dialog-button-ok-text"),jcc.options.datetime.okText),jcc.elementText(document.getElementById("jcc-datetime-dialog-button-now-text"),jcc.options.datetime.nowText),jcc.elementText(document.getElementById("jcc-datetime-dialog-button-cancel-text"),jcc.options.datetime.cancelText);for(r=0;r<7;r++)jcc.elementText(document.getElementById("jcc-datetime-dialog-day-"+r),jcc.options.datetime.weekDays[r]);var h=function(){var t=e.value,n=new Date;if(n.setDate(1),o&jcc.options.datetime.DIALOG_MODE.DATE){var a=parseInt(t.substr(0,4),10);isNaN(a)||(a=a<1970?1970:a,n.setFullYear(a));var i=parseInt(t.substr(5,2),10);isNaN(i)||(i=(i=--i<0?0:i)>11?11:i,n.setMonth(i));var s=parseInt(t.substr(8,2),10);if(!isNaN(s)){var r=[31,n.getFullYear()%4==0?29:28,31,30,31,30,31,31,30,31,30,31][n.getMonth()];s=(s=s<1?1:s)>r?r:s,n.setDate(s)}}if(o&jcc.options.datetime.DIALOG_MODE.TIME){var c=0;o&jcc.options.datetime.DIALOG_MODE.DATE&&(c=11);var l=parseInt(t.substr(c,2),10);isNaN(l)||(l=(l=l<0?0:l)>23?23:l,n.setHours(l));var d=parseInt(t.substr(c+3,"mm".length),10);isNaN(d)||(d=(d=d<0?0:d)>59?59:d,n.setMinutes(d))}return n}();function p(){!function(){var t=h.getMonth()+1;t=t<10?"0"+t:t.toString();var n=h.getDate();n=n<10?"0"+n:n.toString();var a=h.getHours();a=a<10?"0"+a:a.toString();var i=h.getMinutes();i=i<10?"0"+i:i.toString();var s="";o&jcc.options.datetime.DIALOG_MODE.DATE&&(s+=h.getFullYear()+"-"+t+"-"+n);o&jcc.options.datetime.DIALOG_MODE.DATE&&o&jcc.options.datetime.DIALOG_MODE.TIME&&(s+=" ");o&jcc.options.datetime.DIALOG_MODE.TIME&&(s+=a+":"+i);e.value=s}(),t.popup.hide(h),document.getElementById("jcc-datetime-dialog-button-ok").removeEventListener("click",p)}function u(e){if(h=e,o&jcc.options.datetime.DIALOG_MODE.TIME&&(n.selectedIndex=h.getHours(),s.selectedIndex=h.getMinutes()),o&jcc.options.datetime.DIALOG_MODE.DATE){document.getElementById("jcc-datetime-dialog-month-year").innerHTML=jcc.xmlEncode(jcc.options.datetime.months[h.getMonth()])+", "+h.getFullYear();var t=new Date,a=new Date;a.setFullYear(h.getFullYear()),a.setDate(1),a.setMonth(h.getMonth());var i=[31,a.getFullYear()%4==0?29:28,31,30,31,30,31,31,30,31,30,31][a.getMonth()],r=document.getElementById("jcc-datetime-dialog-days");r.innerHTML="";for(var c=a.getDay(),l=0;l<c;l++){(f=document.createElement("div")).className="day",r.appendChild(f)}for(l=0;l<i;l++){var d=l+1;a.setDate(d);var p=document.createElement("div");p.className="day";var m=document.createElement("div");m.dataset.day=d,p.appendChild(m),m.onmousedown=function(){var e=new Date;e.setDate(1),e.setFullYear(h.getFullYear()),e.setMonth(h.getMonth()),e.setDate(this.dataset.day),e.setHours(h.getHours()),e.setMinutes(h.getMinutes()),u(e)};var g="inset";h.getDate()==a.getDate()?g+=" selected":g+=" selectable",t.getFullYear()==a.getFullYear()&&t.getMonth()==a.getMonth()&&t.getDate()==a.getDate()&&(g+=" now"),m.className=g,m.innerHTML=d,r.appendChild(p)}c=(c+i)%7?7-(c+i)%7:0;for(l=0;l<c;l++){var f;(f=document.createElement("div")).className="day",r.appendChild(f)}}}n.onchange=function(){h.setHours(this.selectedIndex)},s.onchange=function(){h.setMinutes(this.selectedIndex)},document.getElementById("jcc-datetime-dialog-button-ok").addEventListener("click",p,!1),document.getElementById("jcc-datetime-dialog-button-now").addEventListener("click",function(){u(new Date),document.getElementById("jcc-datetime-dialog-button-now").removeEventListener("click",p)},!1);var m=document.getElementById("jcc-datetime-dialog-calendar");o&jcc.options.datetime.DIALOG_MODE.DATE?(m.style.display="",o&jcc.options.datetime.DIALOG_MODE.TIME?m.style.marginBottom="0px":m.style.marginBottom="5px",document.getElementById("jcc-datetime-dialog-bw").onmousedown=function(){var e=h.getFullYear(),t=h.getMonth()-1;t<0&&(t=11,--e<1970&&(e=1970));var n=new Date;n.setFullYear(e),n.setMonth(t,1),n.setHours(h.getHours()),n.setMinutes(h.getMinutes()),u(n)},document.getElementById("jcc-datetime-dialog-fw").onmousedown=function(){var e=h.getFullYear(),t=h.getMonth()+1;t>11&&(t=0,e++);var n=new Date;n.setFullYear(e),n.setMonth(t,1),n.setHours(h.getHours()),n.setMinutes(h.getMinutes()),u(n)}):m.style.display="none";var g=document.getElementById("jcc-datetime-dialog-timeselect");if(o&jcc.options.datetime.DIALOG_MODE.TIME?g.style.display="":g.style.display="none","function"==typeof a){t.addEventListener("e-hide",function e(n){t.removeEventListener("e-hide",e),a(n.detail.result)},!1)}u(h),t.popup.show(),document.getElementById("jcc-datetime-dialog-button-now").focus()}}function s(){var e=document.createElement("div");e.id="jcc-colorpicker-dialog",e.classList.add("jcc-colorpicker-dialog"),e.dataset.role="popup",e.dataset.theme=jcc.options.colorpicker.theme?jcc.options.colorpicker.theme:document.body.dataset.theme?document.body.dataset.theme:"a",e.dataset.modal="explicit",e.dataset.cancelable="yes",e.dataset.shadow="yes",e.dataset.corners="smooth",e.dataset.animation="pop",e.innerHTML='<div class="contents"><div class="hue-saturation-container"><div class="hue-saturation"><canvas id="jcc-colorpicker-dialog-hs-canvas" width="212" height="145"></canvas><div id="jcc-colorpicker-dialog-hs-picker" class="picker"><div class="move-handle" data-role="dragon" data-rect-constraint="left:-13 right:-13 top:-13 bottom:-13" data-parent-pointer-anchor="13 13"><div class="ho"></div><div class="vo"></div><div class="hi"></div><div class="vi"></div></div></div></div></div><div class="lightness-container"><div class="lightness"><canvas id="jcc-colorpicker-dialog-lightness-canvas" width="26" height="145"></canvas><div id="jcc-colorpicker-dialog-lightness-picker" class="picker"><div class="move-handle" data-role="dragon" data-directions="v" data-rect-constraint="top:-5 bottom:-5" data-parent-pointer-anchor="5 5"><div class="middle"><div class="window"></div></div></div></div></div></div><div class="alpha-container"><div class="alpha"><canvas id="jcc-colorpicker-dialog-alpha-canvas" width="292" height="26"></canvas><div id="jcc-colorpicker-dialog-alpha-picker" class="picker"><div class="move-handle" data-role="dragon" data-directions="h" data-rect-constraint="left:-5 right:-5" data-parent-pointer-anchor="5 5"><div class="middle"><div class="window"></div></div></div></div></div></div></div><div data-role="delimiter" data-isotope="smooth-ends"></div><div style="text-align:center; padding:0;"><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-colorpicker-dialog-button-ok"></button><span id="jcc-colorpicker-dialog-button-ok-text"></span></label><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-colorpicker-dialog-button-cancel"></button><span id="jcc-colorpicker-dialog-button-cancel-text"></span></label></div>',document.body.appendChild(e);var t=document.getElementById("jcc-colorpicker-dialog-hs-picker");t.style.left="-13px",t.style.top="-13px";var n=document.getElementById("jcc-colorpicker-dialog-lightness-picker");n.style.top="-5px";var o=document.getElementById("jcc-colorpicker-dialog-alpha-picker");o.style.left="-5px";var a=document.getElementById("jcc-colorpicker-dialog-hs-canvas"),i=a.getContext("2d"),s=360/a.width,r=100/a.height,c=i.createLinearGradient(0,0,a.width,0);c.addColorStop(0,"#f00"),c.addColorStop(1/6,"#ff0"),c.addColorStop(2/6,"#0f0"),c.addColorStop(.5,"#0ff"),c.addColorStop(4/6,"#00f"),c.addColorStop(5/6,"#f0f"),c.addColorStop(1,"#f00");var l=i.createLinearGradient(0,0,0,a.height);l.addColorStop(0,"rgba(255,255,255,0)"),l.addColorStop(1,"rgba(255,255,255,1)"),i.fillStyle=c,i.fillRect(0,0,a.width,a.height),i.fillStyle=l,i.fillRect(0,0,a.width,a.height);var d,h=document.getElementById("jcc-colorpicker-dialog-lightness-canvas"),p=h.getContext("2d"),u=100/h.height,m=document.getElementById("jcc-colorpicker-dialog-alpha-canvas"),g=m.getContext("2d"),f=1/m.width,v=null,b=[0,0,0,1];function y(e,t,n){var o=n/100*255;e/=60,t/=100;var a=Math.floor(e),i=o*(1-t),s=o*(1-t*(a%2?e-a:1-(e-a)));switch(o=Math.round(o),i=Math.round(i),s=Math.round(s),a){case 6:case 0:return[o,s,i];case 1:return[s,o,i];case 2:return[i,o,s];case 3:return[i,s,o];case 4:return[s,i,o];case 5:return[o,i,s]}}function j(e){return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function w(e){var t=(e[3].toString().length>4?e[3].toFixed(2):e[3]).toString();return"0"==t.charAt(t.length-1)&&t.length>1&&(t=t.substr(0,t.length-1)),"rgba("+e[0]+","+e[1]+","+e[2]+","+t+")"}function L(){var e=parseInt(t.style.left)+13,n=parseInt(t.style.top)+13,o=e*s,a=100-n*r,i=y(o,a,100),c=y(o,a,0),l=p.createLinearGradient(0,0,0,h.height);l.addColorStop(0,j(i)),l.addColorStop(1,j(c)),p.fillStyle=l,p.fillRect(0,0,h.width,h.height)}function E(){var e=parseInt(t.style.left)+13,o=parseInt(t.style.top)+13,a=y(e*s,100-o*r,100-(o=parseInt(n.style.top)+5)*u);b[0]=a[0],b[1]=a[1],b[2]=a[2]}function x(){o.style.display=d==jcc.options.colorpicker.COLOR_FORMAT.RGBA?"":"none";var e=[b[0],b[1],b[2],1],t=[b[0],b[1],b[2],d==jcc.options.colorpicker.COLOR_FORMAT.RGBA?0:1],n=g.createLinearGradient(0,0,m.width,0);n.addColorStop(0,w(e)),n.addColorStop(1,w(t)),g.clearRect(0,0,m.width,m.height),g.fillStyle=n,g.fillRect(0,0,m.width,m.height)}function C(){b=[0,0,0,1];var e=!1;if(v){var a,i=v.type?v.value:v.style.backgroundColor;if(i&&i.length>0)if((a=(i=i.toLowerCase().replace(/\s/g,"")).match(/^#([a-f0-9]{3})$/))&&(i="#"+a[1].charAt(0)+a[1].charAt(0)+a[1].charAt(1)+a[1].charAt(1)+a[1].charAt(2)+a[1].charAt(2)),a=i.match(/^#([a-f0-9]{6})$/))b[0]=parseInt(a[1].substr(0,2),16),b[1]=parseInt(a[1].substr(2,2),16),b[2]=parseInt(a[1].substr(4,2),16),e=!0;else if((a=i.match(/^rgba?\(([^)]*)\)$/))&&a[1].length>0){var c=a[1].split(",");3!=c.length&&4!=c.length||(b[0]=parseInt(c[0]),b[1]=parseInt(c[1]),b[2]=parseInt(c[2]),4==c.length&&(b[3]=parseFloat(c[3])),isNaN(b[0])||isNaN(b[1])||isNaN(b[2])||isNaN(b[3])||(b[0]=b[0]<0?b[0]:b[0]>255?255:b[0],b[1]=b[1]<0?b[1]:b[1]>255?255:b[1],b[2]=b[2]<0?b[2]:b[2]>255?255:b[2],b[3]=b[3]<0?b[3]:b[3]>1?1:b[3],e=!0))}}e||(b=[0,0,0,1]);var l=function(e,t,n){e/=255,t/=255,n/=255;var o=Math.min(Math.min(e,t),n),a=Math.max(Math.max(e,t),n),i=a-o;if(0===i)return[0,0,100*a];var s=e===o?3+(n-t)/i:t===o?5+(e-n)/i:1+(t-e)/i;return[60*(6===s?0:s),i/a*100,100*a]}(b[0],b[1],b[2]),h=Math.round(l[0]/s)-13,p=Math.round((100-l[1])/r)-13;t.style.left=h+"px",t.style.top=p+"px",L(),p=Math.round((100-l[2])/u)-5,n.style.top=p+"px",x(),d==jcc.options.colorpicker.COLOR_FORMAT.RGBA&&(h=Math.round((1-b[3])/f)-5,o.style.left=h+"px")}t.addEventListener("e-drag",function(){L(),E(),x()},!1),n.addEventListener("e-drag",function(){E(),x()},!1),o.addEventListener("e-drag",function(){var e=parseInt(o.style.left)+5;b[3]=1-e*f},!1),document.getElementById("jcc-colorpicker-dialog-button-ok").addEventListener("click",function(){var t,n;d==jcc.options.colorpicker.COLOR_FORMAT.RGB?t=j(b):d==jcc.options.colorpicker.COLOR_FORMAT.RGBA?t=w(b):t="#"+(256|(n=b)[0]).toString(16).substr(1)+(256|n[1]).toString(16).substr(1)+(256|n[2]).toString(16).substr(1),v&&(v.style.backgroundColor=t,v.type&&(v.style.color=t,v.value=t)),e.popup.hide(t)},!1),document.getElementById("jcc-colorpicker-dialog-button-cancel").addEventListener("click",function(){e.popup.hide(0)},!1),jcc.enhance(e),jcc.colorpicker=function(t,n,o){jcc.elementText(document.getElementById("jcc-colorpicker-dialog-button-ok-text"),jcc.options.colorpicker.okText),jcc.elementText(document.getElementById("jcc-colorpicker-dialog-button-cancel-text"),jcc.options.colorpicker.cancelText);jcc.getComputedStyle(t,"color"),jcc.getComputedStyle(t,"background-color");if(v=t,d=n,"function"==typeof o){e.addEventListener("e-hide",function t(n){e.removeEventListener("e-hide",t),o(n.detail.result)},!1)}e.popup.show(),document.getElementById("jcc-colorpicker-dialog-button-cancel").focus(),C()}}this.whatAnimationEnd=function(){if(null===a){var e=document.createElement("div"),t={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend"};for(var n in t)if(void 0!==e.style[n]){a=t[n];break}null===a&&(a=!1)}return a},this.addTransitionEndListener=function(e,t,n){var o=this.whatTransitionEnd();return!!o&&(e.addEventListener(o,t,n),!0)},this.removeTransitionEndListener=function(e,t){var n=this.whatTransitionEnd();return!!n&&(e.removeEventListener(n,t),!0)},this.addAnimationEndListener=function(e,t,n){var o=this.whatAnimationEnd();return!!o&&(e.addEventListener(o,t,n),!0)},this.removeAnimationEndListener=function(e,t){var n=this.whatAnimationEnd();return!!n&&(e.removeEventListener(n,t),!0)},this.elementText=function(e,t){e.innerHTML=this.xmlEncode(t)},this.xmlEncode=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},this.enhance=function(e){if(1==e.nodeType){var t=e.childNodes;for(var n in this.widgets)if(this.widgets[n]&&this.widgets[n].can_enhance&&1==this.widgets[n].can_enhance(e)){this.widgets[n].enhance(e);break}for(var o=0;o<t.length;o++)this.enhance(t[o])}},this.unenhance=function(e){if(1==e.nodeType){for(var t in this.widgets)if(this.widgets[t]&&this.widgets[t].can_enhance&&1==this.widgets[t].can_enhance(e)){this.widgets[t].unenhance(e);break}for(var n=e.childNodes,o=0;o<n.length;o++)this.unenhance(n[o])}},this.init=function(e){var n;(n=document.createElement("div")).id="jcc-alert-dialog",n.classList.add("jcc-alert-dialog"),n.dataset.role="popup",n.dataset.theme=jcc.options.alert.theme?jcc.options.alert.theme:document.body.dataset.theme?document.body.dataset.theme:"a",n.dataset.modal="explicit",n.dataset.cancelable="yes",n.dataset.shadow="yes",n.dataset.corners="smooth",n.dataset.animation="pop",n.innerHTML='<div style="margin-bottom:10px;"><h3 id="jcc-alert-dialog-title"></h3><div data-role="delimiter" data-isotope="smooth-ends" style="margin:10px 0px;"></div><span id="jcc-alert-dialog-message"></span></div><div data-role="delimiter" data-isotope="smooth-ends"></div><div style="text-align:center;"><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-alert-dialog-button-ok"></button><span id="jcc-alert-dialog-button-ok-text"></span></label></div>',document.body.appendChild(n),document.getElementById("jcc-alert-dialog-button-ok").addEventListener("click",function(){n.popup.hide(0)},!1),jcc.enhance(n),jcc.alert=function(e,t,o,a){t=t||jcc.options.alert.defaultTitle,a?(document.getElementById("jcc-alert-dialog-message").innerHTML=e,document.getElementById("jcc-alert-dialog-title").innerHTML=t):(jcc.elementText(document.getElementById("jcc-alert-dialog-message"),e),jcc.elementText(document.getElementById("jcc-alert-dialog-title"),t)),jcc.elementText(document.getElementById("jcc-alert-dialog-button-ok-text"),jcc.options.alert.okText),"function"==typeof o&&n.addEventListener("e-hide",function e(t){n.removeEventListener("e-hide",e),o(t.detail.result)},!1),n.popup.show(),document.getElementById("jcc-alert-dialog-button-ok").focus()},function(){var e=document.createElement("div");e.id="jcc-confirm-dialog",e.classList.add("jcc-confirm-dialog"),e.dataset.role="popup",e.dataset.theme=jcc.options.confirm.theme?jcc.options.confirm.theme:document.body.dataset.theme?document.body.dataset.theme:"a",e.dataset.modal="explicit",e.dataset.cancelable="yes",e.dataset.shadow="yes",e.dataset.corners="smooth",e.dataset.animation="pop",e.innerHTML='<div style="margin-bottom:10px;"><h3 id="jcc-confirm-dialog-title"></h3><div data-role="delimiter" data-isotope="smooth-ends" style="margin:10px 0px;"></div><span id="jcc-confirm-dialog-message"></span></div><div data-role="delimiter" data-isotope="smooth-ends"></div><div style="text-align:center;"><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-confirm-dialog-button-yes"></button><span id="jcc-confirm-dialog-button-yes-text"></span></label><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-confirm-dialog-button-no"></button><span id="jcc-confirm-dialog-button-no-text"></span></label></div>',document.body.appendChild(e),document.getElementById("jcc-confirm-dialog-button-yes").addEventListener("click",function(){e.popup.hide(!0)},!1),document.getElementById("jcc-confirm-dialog-button-no").addEventListener("click",function(){e.popup.hide(!1)},!1),jcc.enhance(e),jcc.confirm=function(t,n,o,a){n=n||jcc.options.confirm.defaultTitle,a?(document.getElementById("jcc-confirm-dialog-message").innerHTML=t,document.getElementById("jcc-confirm-dialog-title").innerHTML=n):(jcc.elementText(document.getElementById("jcc-confirm-dialog-message"),t),jcc.elementText(document.getElementById("jcc-confirm-dialog-title"),n)),jcc.elementText(document.getElementById("jcc-confirm-dialog-button-yes-text"),jcc.options.confirm.yesText),jcc.elementText(document.getElementById("jcc-confirm-dialog-button-no-text"),jcc.options.confirm.noText),"function"==typeof o&&e.addEventListener("e-hide",function t(n){e.removeEventListener("e-hide",t),o(n.detail.result)},!1),e.popup.show(),document.getElementById("jcc-confirm-dialog-button-no").focus()}}(),function(){var e=document.createElement("div");e.id="jcc-prompt-dialog",e.classList.add("jcc-prompt-dialog"),e.dataset.role="popup",e.dataset.theme=jcc.options.prompt.theme?jcc.options.prompt.theme:document.body.dataset.theme?document.body.dataset.theme:"a",e.dataset.modal="explicit",e.dataset.cancelable="yes",e.dataset.shadow="yes",e.dataset.corners="smooth",e.dataset.animation="pop",e.dataset.cancelValue="cancel",e.innerHTML='<div style="margin-bottom:10px;"><h3 id="jcc-prompt-dialog-title"></h3><div data-role="delimiter" data-isotope="smooth-ends" style="margin:10px 0px;"></div><span id="jcc-prompt-dialog-message"></span><br/><div data-role="inputfield" style="margin-top:10px;"><input id="jcc-prompt-dialog-input" type="text" value=""/><div></div></div></div><div data-role="delimiter" data-isotope="smooth-ends"></div><div style="text-align:center;"><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-prompt-dialog-button-ok"></button><span id="jcc-prompt-dialog-button-ok-text"></span></label><label data-role="button" data-isotope="contrast-quiet" style="margin:1px 0px; width:50%;"><button id="jcc-prompt-dialog-button-cancel"></button><span id="jcc-prompt-dialog-button-cancel-text"></span></label></div>',document.body.appendChild(e),document.getElementById("jcc-prompt-dialog-button-ok").addEventListener("click",function(){e.popup.hide(document.getElementById("jcc-prompt-dialog-input").value)},!1),document.getElementById("jcc-prompt-dialog-button-cancel").addEventListener("click",function(){e.popup.hide(e.dataset.cancelValue)},!1),jcc.enhance(e),jcc.prompt=function(t,n,o,a,i){null==a&&(a="cancel"),e.dataset.cancelValue=a,document.getElementById("jcc-prompt-dialog-input").value="",n=n||jcc.options.prompt.defaultTitle,i?(document.getElementById("jcc-prompt-dialog-message").innerHTML=t,document.getElementById("jcc-prompt-dialog-title").innerHTML=n):(jcc.elementText(document.getElementById("jcc-prompt-dialog-message"),t),jcc.elementText(document.getElementById("jcc-prompt-dialog-title"),n)),jcc.elementText(document.getElementById("jcc-prompt-dialog-button-ok-text"),jcc.options.prompt.okText),jcc.elementText(document.getElementById("jcc-prompt-dialog-button-cancel-text"),jcc.options.prompt.cancelText),"function"==typeof o&&e.addEventListener("e-hide",function t(n){e.removeEventListener("e-hide",t),o(n.detail.result)},!1),e.popup.show(),document.getElementById("jcc-prompt-dialog-input").focus()}}(),i(),s(),e&&this.enhance(e),function e(){t!=location.hash&&(jcc.handleHistory(),t=location.hash),setTimeout(function(){e()},0)}()},this.sortedPrimitiveArray=function(e,t){e.findInsertPos=function(e){if(0==this.length)return 0;var t,n=0,o=this.length-1;if(this[n]>=e)return this[n]==e?-1:n;if(this[o]<=e)return this[o]==e?-1:o+1;for(;;){if(o-n<=1)return o;if(this[t=n+Math.floor((o-n)/2)]<e)n=t;else{if(this[t]==e)return-1;o=t}}},e.findIndex=function(e){if(this.length<=0)return-1;var t,n=0,o=this.length-1;if(this[n]>=e)return this[n]==e?n:-1;if(this[o]<=e)return this[o]==e?o:-1;for(;;){if(o-n<=1)return-1;if(this[t=n+Math.floor((o-n)/2)]<e)n=t;else{if(this[t]==e)return t;o=t}}},e.add=function(e){var t=this.findInsertPos(e);return t>-1&&this.splice(t,0,e),t},e.remove=function(e){var t=this.findIndex(e);return t>-1&&this.splice(t,1),t},t&&e.sort(function(e,t){return e==t?0:e<t?-1:1})},this.sortedArray=function(e,t,n,o){o=!!o,e.findInsertPosition=o?function(e){if(this.length<=0)return 0;var n,o=0,a=this.length-1;if(this[o][t]<=e[t])return o;if(this[a][t]>=e[t])return a+1;for(;;){if(a-o<=1)return a;if(this[n=o+Math.floor((a-o)/2)][t]>e[t])o=n;else{if(this[n][t]==e[t])return n;a=n}}}:function(e){if(this.length<=0)return 0;var n,o=0,a=this.length-1;if(this[o][t]>=e[t])return o;if(this[a][t]<=e[t])return a+1;for(;;){if(a-o<=1)return a;if(this[n=o+Math.floor((a-o)/2)][t]<e[t])o=n;else{if(this[n][t]==e[t])return n;a=n}}},e.findIndexBySortValue=o?function(e){if(this.length<=0)return-1;var n,o=0,a=this.length-1;if(this[o][t]<e)return-1;if(this[o][t]==e)return o;for(;;){if(a-o<=1)return this[o][t]==e?o:this[a][t]==e?a:-1;this[n=o+Math.floor((a-o)/2)][t]>e?o=n:a=n}}:function(e){if(this.length<=0)return-1;var n,o=0,a=this.length-1;if(this[o][t]>e)return-1;if(this[o][t]==e)return o;for(;;){if(a-o<=1)return this[o][t]==e?o:this[a][t]==e?a:-1;this[n=o+Math.floor((a-o)/2)][t]<e?o=n:a=n}},e.findIndex=function(e){return this.findIndexBySortValue(e[t])},e.findIndexCompare=function(e,n){var o=this.findIndexBySortValue(e[t]);if(o>-1)for(;o<this.length&&this[o][t]==e[t];o++)if(n(e,this[o]))return o;return-1},e.add=function(e){var t=this.findInsertPosition(e);return t>-1&&this.splice(t,0,e),t},e.remove=function(t,n){var o="function"==typeof n?e.findIndexCompare(t,n):e.findIndex(t);return o>-1&&this.splice(o,1),o},n&&(o?e.sort(function(e,n){return e[t]==n[t]?0:e[t]<n[t]?1:-1}):e.sort(function(e,n){return e[t]==n[t]?0:e[t]<n[t]?-1:1}))},this.sortedSubfieldArray=function(e,t,n,o,a){a=!!a,e.findInsertPosition=a?function(e){if(this.length<=0)return 0;var o,a=0,i=this.length-1;if(this[a][t][n]<=e[t][n])return a;if(this[i][t][n]>=e[t][n])return i+1;for(;;){if(i-a<=1)return i;if(this[o=a+Math.floor((i-a)/2)][t][n]>e[t][n])a=o;else{if(this[o][t][n]==e[t][n])return o;i=o}}}:function(e){if(this.length<=0)return 0;var o,a=0,i=this.length-1;if(this[a][t][n]>=e[t][n])return a;if(this[i][t][n]<=e[t][n])return i+1;for(;;){if(i-a<=1)return i;if(this[o=a+Math.floor((i-a)/2)][t][n]<e[t][n])a=o;else{if(this[o][t][n]==e[t][n])return o;i=o}}},e.findIndexBySortValue=a?function(e){if(this.length<=0)return-1;var o,a=0,i=this.length-1;if(this[a][t][n]<e)return-1;if(this[a][t][n]==e)return a;for(;;){if(i-a<=1)return this[a][t][n]==e?a:this[i][t][n]==e?i:-1;this[o=a+Math.floor((i-a)/2)][t][n]>e?a=o:i=o}}:function(e){if(this.length<=0)return-1;var o,a=0,i=this.length-1;if(this[a][t][n]>e)return-1;if(this[a][t][n]==e)return a;for(;;){if(i-a<=1)return this[a][t][n]==e?a:this[i][t][n]==e?i:-1;this[o=a+Math.floor((i-a)/2)][t][n]<e?a=o:i=o}},e.findIndex=function(e){return this.findIndexBySortValue(e[t][n])},e.findIndexCompare=function(e,o){var a=this.findIndexBySortValue(e[t][n]);if(a>-1)for(;a<this.length&&this[a][t][n]==e[t][n];a++)if(o(e,this[a]))return a;return-1},e.add=function(e){var t=this.findInsertPosition(e);return t>-1&&this.splice(t,0,e),t},e.remove=function(t,n){"function"!=typeof n&&(n=function(){return!0});var o="function"==typeof n?e.findIndexCompare(t,n):e.findIndex(t);return o>-1&&this.splice(o,1),o},o&&(a?e.sort(function(e,o){return e[t][n]==o[t][n]?0:e[t][n]<o[t][n]?1:-1}):e.sort(function(e,o){return e[t][n]==o[t][n]?0:e[t][n]<o[t][n]?-1:1}))}};jcc.widgets.container={version:"1.0",can_enhance:function(e){return("BODY"==e.nodeName||"DIV"==e.nodeName)&&"container"==e.getAttribute("data-role")},enhance:function(e){e.container?e.container.refresh():new jcc.container(e).refresh()},unenhance:function(e){e.container&&e.container.destroy()}},jcc.container=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),t=this.theme(),"yes"!=e.dataset.selection&&"no"!=e.dataset.selection&&(e.dataset.selection="no"),e.container=this,e.classList.add("jcc-container"),e.classList.add("jcc-container-"+t)},this.destroy=function(){e.container&&(e.classList.remove("jcc-container"),e.classList.remove("jcc-container-"+t),delete e.container)}},jcc.widgets.popup={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"popup"==e.getAttribute("data-role")},enhance:function(e){e.popup?e.popup.refresh():new jcc.popup(e).refresh()},unenhance:function(e){e.popup&&e.popup.destroy()}},jcc.popup=function(el){var theme;this.container=jcc.container,this.container(el),this.super_getOption=this.getOption,this.super_refresh=this.refresh,this.super_destroy=this.destroy;var modal,pane,visible=!1,parent,resize_dirs,resizable=!1,will_resize,prex,prey,gainx,gainy,s_left,s_top,s_w,s_h,centered_x,centered_y,historyEnabled,cancelable,position,animation,parentClass,reversedOut,relateElement,currentPositioning,shadow,align,arrow,arrow_element,anchor,ignoreResizeOnce,self=this;function onParentResize(e){visible&&(centered_x||centered_y)&&recomputePosition()}function onRelateElementParentsScroll(e){visible&&relateElement&&recomputePosition()}function onPopupResize(e){!ignoreResizeOnce&&visible?recomputePosition():ignoreResizeOnce=!1}function onRelateElementChanged(e){relateElement&&visible&&recomputePosition()}function onPopupDrag(e){centered_x=centered_y=!1}function onPopupManualResize(e){centered_x=centered_y=!1,ignoreResizeOnce=!0}function onPaneClick(e){self.hide(0),e.preventDefault(),e.stopPropagation()}function onElementPointerDown(e){if(resizable&&!(e.touches&&e.touches.length>1)){var t,n;e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),t-=window.pageXOffset,n-=window.pageYOffset;var o=jcc.getElementRect(el);will_resize={},resize_dirs.left&&t>=o.left&&t<o.left+resize_dirs.left&&(will_resize.left=!0),resize_dirs.right&&t>=o.right-resize_dirs.right&&t<o.right&&(will_resize.right=!0),resize_dirs.top&&n>=o.top&&n<o.top+resize_dirs.top&&(will_resize.top=!0),resize_dirs.bottom&&n>=o.bottom-resize_dirs.bottom&&n<o.bottom&&(will_resize.bottom=!0),will_resize.left||will_resize.right||will_resize.top||will_resize.bottom?(prex=t,prey=n,gainx=gainy=0,s_left=parseInt(jcc.getComputedStyle(el,"left")),s_top=parseInt(jcc.getComputedStyle(el,"top")),s_w=o.width,s_h=o.height,e.preventDefault(),e.stopPropagation()):will_resize=null}}function onElementPointerMove(e){if(resizable&&!(e.touches&&e.touches.length>1)){var t,n;e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),t-=window.pageXOffset,n-=window.pageYOffset;var o=jcc.getElementRect(el),a={};resize_dirs.left&&t>=o.left&&t<o.left+resize_dirs.left&&(a.left=!0),resize_dirs.right&&t>=o.right-resize_dirs.right&&t<o.right&&(a.right=!0),resize_dirs.top&&n>=o.top&&n<o.top+resize_dirs.top&&(a.top=!0),resize_dirs.bottom&&n>=o.bottom-resize_dirs.bottom&&n<o.bottom&&(a.bottom=!0);var i="auto";a.left&&a.top||a.right&&a.bottom?i="nwse-resize":a.right&&a.top||a.left&&a.bottom?i="nesw-resize":a.left||a.right?i="ew-resize":(a.top||a.bottom)&&(i="ns-resize"),el.style.cursor=i}}function onDocumentPointerMove(e){if(resizable&&will_resize&&visible&&!(e.touches&&e.touches.length>1)){var t,n;e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),t-=window.pageXOffset,n-=window.pageYOffset,gainx+=t-prex,gainy+=n-prey,prex=t,prey=n;var o=s_left+gainx,a=s_top+gainy,i=(window.innerWidth,window.innerHeight,"window"==currentPositioning?jcc.getViewportRect():jcc.getElementLocalRect(parent),parseInt(jcc.getComputedStyle(el,"min-width")));isNaN(i)&&(i=2);var s=parseInt(jcc.getComputedStyle(el,"max-width")),r=parseInt(jcc.getComputedStyle(el,"min-height"));isNaN(r)&&(r=2);var c,l,d=parseInt(jcc.getComputedStyle(el,"max-height"));if(will_resize.left)(c=s_w-gainx)<i?(o-=i-c,c=i):0==isNaN(s)&&c>s&&(o+=c-s,c=s),el.style.left=o+"px",el.style.width=c+"px",onPopupManualResize();if(will_resize.top)(l=s_h-gainy)<r?(a-=r-l,l=r):0==isNaN(d)&&l>d&&(a+=l-d,l=d),el.style.top=a+"px",el.style.height=l+"px",onPopupManualResize();if(will_resize.right)(c=s_w+gainx)<i?c=i:0==isNaN(s)&&c>s&&(c=s),el.style.width=c+"px",onPopupManualResize();if(will_resize.bottom)(l=s_h+gainy)<r?l=r:0==isNaN(s)&&l>d&&(l=d),el.style.height=l+"px",onPopupManualResize()}}function onDocumentPointerUp(e){will_resize=null}function onEShow(event){el.dataset.eShow&&el.dataset.eShow.length>0&&eval(el.dataset.eShow)}function onEHide(event){el.dataset.eHide&&el.dataset.eHide.length>0&&eval(el.dataset.eHide)}function onInAnimationEnd(){if(el.popup&&(jcc.removeAnimationEndListener(el,onInAnimationEnd),el.addEventListener("e-resized",onPopupResize,!1),relateElement)){jcc.resizeMonitor.addElement(relateElement),jcc.repositionMonitor.addElement(relateElement),relateElement.addEventListener("e-resized",onRelateElementChanged,!1),relateElement.addEventListener("e-moved",onRelateElementChanged,!1);var e=relateElement.parentNode;do{e.addEventListener("scroll",onRelateElementParentsScroll,!1)}while(e=e.parentNode)}}function onOutAnimationEnd(){el.popup&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),el.classList.add("jcc-popup-hidden"),pane&&pane.classList.add("jcc-popup-pane-hidden"))}function removeAnimationClasses(){el.classList.remove("jcc-animation-"+animation),el.classList.remove("jcc-in"),el.classList.remove("jcc-out"),el.classList.remove("jcc-back"),parentClass&&""!=parentClass&&(el.parentNode.classList.remove(parentClass),parentClass=null)}function readAnchor(){anchor={x:"center",y:"center"};var e=el.dataset.anchor.toLowerCase().split(" ");anchor.x=e[0],"left"!=anchor.x&&"center"!=anchor.x&&"right"!=anchor.x&&(anchor.x=parseInt(anchor.x),isNaN(anchor.x)&&(anchor.x="center")),e.length>1&&(anchor.y=e[1],"top"!=anchor.y&&"center"!=anchor.y&&"bottom"!=anchor.y&&(anchor.y=parseInt(anchor.y),isNaN(anchor.y)&&(anchor.y="center")))}function readPosition(){position={x:"auto",y:"auto"};var e=el.dataset.position.split(" ");if(e.length>0){var t=parseInt(e[0]);isNaN(t)||(position.x=t),e.length>1&&(t=parseInt(e[1]),isNaN(t)||(position.y=t))}}function readAnimation(){reversedOut="yes"==el.dataset.reversedOut,animation=el.dataset.animation,(animation=jcc.animations[animation])?(animation=animation.suffix,parentClass=animation.parentClass):(animation="none",parentClass=null)}function pushFront(){jcc.popups_z||(jcc.popups_z={});var e=999;for(var t in jcc.popups_z)null!=jcc.popups_z[t].z&&jcc.popups_z[t].z>e&&(e=jcc.popups_z[t].z);e+=2,jcc.popups_z[el.id]={z:e},el.style.zIndex=e.toString(),pane&&(pane.style.zIndex=(e-1).toString())}function pushBack(){jcc.popups_z&&delete jcc.popups_z[el.id]}function unlinkRelateElementEvents(){if(relateElement){jcc.resizeMonitor.removeElement(relateElement),jcc.repositionMonitor.removeElement(relateElement),relateElement.removeEventListener("e-resized",onRelateElementChanged),relateElement.removeEventListener("e-moved",onRelateElementChanged);var e=relateElement.parentNode;do{e.removeEventListener("scroll",onRelateElementParentsScroll)}while(e=e.parentNode)}}function recomputePosition(){var e=position.x,t=position.y;(align.length>0||relateElement)&&("auto"==e&&(e=0),"auto"==t&&(t=0)),align.length>0&&arrow_element&&(arrow_element.style.left=arrow_element.style.right=arrow_element.style.top=arrow_element.style.bottom="");var n=jcc.getViewportRect(),o=null,a=null;"window"==currentPositioning?o=a=n:(o=jcc.getElementLocalRect(parent),a=jcc.getElementRect(parent));var i=jcc.getElementLocalRect(el),s=i.width,r=i.height,c=0,l=0;if(relateElement){var d=jcc.getElementRect(relateElement);if(align.length>0){var h={left:Math.max(a.left,n.left),right:Math.min(a.right,n.right),top:Math.max(a.top,n.top),bottom:Math.min(a.bottom,n.bottom)},p=align[0];if(align.length>1){for(var u=[],m=0;m<align.length;m++){"left"==(b=align[m])?u.push({s:b,w:(d.left-h.left)/s}):"right"==b?u.push({s:b,w:(h.right-d.right)/s}):"top"==b?u.push({s:b,w:(d.top-h.top)/r}):"bottom"==b&&u.push({s:b,w:(h.bottom-d.bottom)/r})}u.sort(function(e,t){return t.w-e.w}),p=u[0].s}arrow_element&&(arrow_element.className="jcc-arrow jcc-arrow-"+p+"-"+theme);var g=arrow?Math.round(arrow_element.offsetWidth/2)+1:0;"left"==p?(e=-e,e+=-s+d.left-g,(t+=-r/2+d.top+d.height/2)+r>h.bottom&&(t=h.bottom-r)+r<d.bottom&&(t=d.bottom-r),t<h.top&&(t=h.top)>d.top&&(t=d.top),arrow_element&&(arrow_element.style.top=Math.round(d.top+d.height/2-t-g)+"px")):"right"==p?(e+=d.right+g,(t+=-r/2+d.top+d.height/2)+r>h.bottom&&(t=h.bottom-r)+r<d.bottom&&(t=d.bottom-r),t<h.top&&(t=h.top)>d.top&&(t=d.top),arrow_element&&(arrow_element.style.top=Math.round(d.top+d.height/2-t-g)+"px")):"top"==p?(t=-t,t+=-r+d.top-g,(e+=-s/2+d.left+d.width/2)+s>h.right&&(e=h.right-s)+s<d.right&&(e=d.right-s),e<h.left&&(e=h.left)>d.left&&(e=d.left),arrow_element&&(arrow_element.style.left=Math.round(d.left+d.width/2-e-g)+"px")):"bottom"==p&&(t+=d.bottom+g,(e+=-s/2+d.left+d.width/2)+s>h.right&&(e=h.right-s)+s<d.right&&(e=d.right-s),e<h.left&&(e=h.left)>d.left&&(e=d.left),arrow_element&&(arrow_element.style.left=Math.round(d.left+d.width/2-e-g)+"px"))}else e+=d.left+d.width/2-s/2,t+=d.top+d.height/2-r/2;e-=a.left,t-=a.top}else if(align.length>0){var f=e+a.left,v=t+a.top;h={left:Math.max(a.left,n.left),right:Math.min(a.right,n.right),top:Math.max(a.top,n.top),bottom:Math.min(a.bottom,n.bottom)},p=align[0];if(align.length>1){for(u=[],m=0;m<align.length;m++){var b;"left"==(b=align[m])?u.push({s:b,w:(f-h.left)/s}):"right"==b?u.push({s:b,w:(h.right-f)/s}):"top"==b?u.push({s:b,w:(v-h.top)/r}):"bottom"==b&&u.push({s:b,w:(h.bottom-v)/r})}u.sort(function(e,t){return t.w-e.w}),p=u[0].s}arrow_element&&(arrow_element.className="jcc-arrow jcc-arrow-"+p+"-"+theme);g=arrow?Math.round(arrow_element.offsetWidth/2)+1:0;"left"==p?(e=-s+f-g,(t=-r/2+v)+r>h.bottom&&(t=h.bottom-r)+r<v+20&&(t=v+20),t<h.top&&(t=h.top)>v-20&&(t=v-20),arrow_element&&(arrow_element.style.top=Math.round(v-t-g)+"px")):"right"==p?(e=f+g,(t=-r/2+v)+r>h.bottom&&(t=h.bottom-r)+r<v+20&&(t=v+20),t<h.top&&(t=h.top)>v-20&&(t=v-20),arrow_element&&(arrow_element.style.top=Math.round(v-t-g)+"px")):"top"==p?(t=-r+v-g,(e=-s/2+f)+s>h.right&&(e=h.right-s)+s<f+20&&(e=f+20),e<h.left&&(e=h.left)>f-20&&(e=f-20),arrow_element&&(arrow_element.style.left=Math.round(f-e-g)+"px")):"bottom"==p&&(t=v+g,(e=-s/2+f)+s>h.right&&(e=h.right-s)+s<f+20&&(e=f+20),e<h.left&&(e=h.left)>f-20&&(e=f-20),arrow_element&&(arrow_element.style.left=Math.round(f-e-g)+"px")),e-=a.left,t-=a.top}else c="right"==anchor.x?-s:"left"==anchor.x?0:"center"==anchor.x?-s/2:-anchor.x,l="bottom"==anchor.y?-r:"top"==anchor.y?0:"center"==anchor.y?-r/2:-anchor.y;centered_x=centered_y=!1,"auto"==e?(centered_x=!0,c+=o.width/2):c+=e,"auto"==t?(centered_y=!0,l+=o.height/2):l+=t,c=Math.round(c),l=Math.round(l),el.style.left=c+"px",el.style.top=l+"px"}this.setOptions=function(e){var t=!1;for(var n in e)"number"!=typeof e[n]&&"string"!=typeof e[n]||(el.dataset[n]=e[n].toString(),"animation"!=n&&"anchor"!=n&&"relateTo"!=n&&"position"!=n&&"align"!=n?t=!0:visible&&alert("JCC: The options 'animation', 'anchor', 'relateTo', 'align' and 'position' should be set ONLY when the popup widget is NOT visible to avoid undefined and undesired behaviour!"));t&&this.refresh()},this.refresh=function(){if(el.id&&0!=el.id.length)if(el.id.indexOf("|")>0)alert("JCC: A 'popup' may not contain | in its ID as it is reserved for URL encoding!");else{this.destroy(),this.super_refresh(),theme=this.theme(),el.popup=this,el.dataset.animation&&0!=el.dataset.animation.length||(el.dataset.animation="none"),"yes"!=el.dataset.history&&"no"!=el.dataset.history&&(el.dataset.history="no"),"yes"!=el.dataset.cancelable&&"no"!=el.dataset.cancelable&&(el.dataset.cancelable="yes"),"yes"!=el.dataset.shadow&&"no"!=el.dataset.shadow&&(el.dataset.shadow="yes"),"yes"!=el.dataset.arrow&&"no"!=el.dataset.arrow&&(el.dataset.arrow="no"),"yes"!=el.dataset.reversedOut&&"no"!=el.dataset.reversedOut&&(el.dataset.reversedOut="no"),"flat"!=el.dataset.corners&&"smooth"!=el.dataset.corners&&(el.dataset.corners="smooth"),el.dataset.align||(el.dataset.align=""),"no"!=el.dataset.modal&&"implicit"!=el.dataset.modal&&"explicit"!=el.dataset.modal&&(el.dataset.modal="no"),el.dataset.resizeGrip&&0!=el.dataset.resizeGrip.length||(el.dataset.resizeGrip="left:none right:none top:none bottom:none"),el.dataset.position||(el.dataset.position="auto auto"),el.dataset.anchor&&0!=el.dataset.anchor.length||(el.dataset.anchor="center center"),el.dataset.relateTo&&0!=el.dataset.relateTo.length||(el.dataset.relateTo="window"),historyEnabled="yes"==el.dataset.history,cancelable="yes"==el.dataset.cancelable,arrow="yes"==el.dataset.arrow,resize_dirs={},resizable=!1,o=el.dataset.resizeGrip.toLowerCase().split(" ");for(var e=0;e<o.length;e++){var t=o[e].split(":");if(2==t.length&&("left"==t[0]||"right"==t[0]||"top"==t[0]||"bottom"==t[0])){var n=parseInt(t[1]);!isNaN(n)&&n>0&&(resize_dirs[t[0]]=n,resizable=!0)}}if(align=[],!resizable){var o=el.dataset.align.toLowerCase().split(" ");for(e=0;e<o.length;e++)"left"!=o[e]&&"right"!=o[e]&&"top"!=o[e]&&"bottom"!=o[e]||align.push(o[e])}if(arrow){if(resizable)return void alert("JCC: A popup with arrow may not be resizable!");arrow_element=document.createElement("div"),el.appendChild(arrow_element),0==align.length&&(el.dataset.align="left right top bottom",align=["left","right","top","bottom"])}"no"==(modal=el.dataset.modal)&&cancelable&&(modal="implicit"),parent=el.parentNode,jcc.resizeMonitor.addElement(parent),parent!=document.body&&"static"==jcc.getComputedStyle(parent,"position")&&parent.classList.add("jcc-popup-make-parent-relative"),jcc.resizeMonitor.addElement(el),"no"!=modal&&((pane=document.createElement("div")).classList.add("jcc-popup-pane"),pane.classList.add("jcc-popup-pane-hidden"),"explicit"==modal&&pane.classList.add("jcc-popup-pane-darken"),document.body.appendChild(pane)),el.classList.add("jcc-popup"),el.classList.add("jcc-popup-"+theme),el.classList.add("jcc-popup-hidden"),arrow&&el.classList.add("jcc-popup-with-arrow"),el.addEventListener("e-show",onEShow,!1),el.addEventListener("e-hide",onEHide,!1),el.addEventListener("e-drag",onPopupDrag,!1),el.addEventListener("mousedown",onElementPointerDown,!1),el.addEventListener("touchstart",onElementPointerDown,!1),el.addEventListener("mousemove",onElementPointerMove,!1),el.addEventListener("touchmove",onElementPointerMove,!1),document.addEventListener("mousemove",onDocumentPointerMove,{passive:!1,capture:!1}),document.addEventListener("touchmove",onDocumentPointerMove,{passive:!1,capture:!1}),document.addEventListener("mouseup",onDocumentPointerUp,{passive:!1,capture:!1}),document.addEventListener("touchend",onDocumentPointerUp,{passive:!1,capture:!1}),window.addEventListener("resize",onParentResize,{passive:!1,capture:!1}),parent.addEventListener("e-resized",onParentResize,!1)}else alert("JCC: Each 'popup' should have its unique 'id' attribute in the HTML markup!")},this.destroy=function(){this.super_destroy(),el.popup&&(jcc.resizeMonitor.removeElement(el),relateElement&&(unlinkRelateElementEvents(),delete relateElement),el.removeEventListener("e-show",onEShow),el.removeEventListener("e-hide",onEHide),el.removeEventListener("e-resized",onPopupResize),el.removeEventListener("e-drag",onPopupDrag),el.removeEventListener("mousedown",onElementPointerDown),el.removeEventListener("touchstart",onElementPointerDown),el.removeEventListener("mousemove",onElementPointerMove),el.removeEventListener("touchmove",onElementPointerMove),document.removeEventListener("mousemove",onDocumentPointerMove),document.removeEventListener("touchmove",onDocumentPointerMove),document.removeEventListener("mouseup",onDocumentPointerUp),document.removeEventListener("touchend",onDocumentPointerUp),window.removeEventListener("resize",onParentResize),jcc.removeAnimationEndListener(el,onInAnimationEnd),jcc.removeAnimationEndListener(el,onOutAnimationEnd),pushBack(),pane&&(pane.removeEventListener("click",onPaneClick),jcc.detach(pane),pane=null),arrow_element&&(el.removeChild(arrow_element),arrow_element=null),el.classList.remove("jcc-popup"),el.classList.remove("jcc-popup-"+theme),el.classList.remove("jcc-popup-hidden"),el.classList.remove("jcc-popup-with-arrow"),removeAnimationClasses(),el.classList.remove("jcc-popup-position-parent"),el.classList.remove("jcc-popup-position-window"),parent&&(jcc.resizeMonitor.removeElement(parent),parent.removeEventListener("e-resized",onParentResize),parent.classList.remove("jcc-popup-make-parent-relative"),parent=null),delete el.popup)},this.show=function(e){if(el.popup&&!visible)if(historyEnabled){var t=location.hash.substr(1),n=t.indexOf("?"),o="";if(n>-1&&(o=t.substr(n)),this.overrideHistoryState=e,e){var a=jcc.historyStateCopy(jcc.currentHistoryState());a.popups.push(el.id),window.history.replaceState(null,"",jcc.historyStateToHash(a)+o)}else location.hash="#"+el.id+o}else this.__show()},this.__show=function(e){if(el.popup&&!visible){if(jcc.removeAnimationEndListener(el,onOutAnimationEnd),readAnchor(),readPosition(),relateElement=null,"parent"!=(currentPositioning=el.dataset.relateTo)&&"window"!=currentPositioning){if(!(relateElement=document.body.querySelector(currentPositioning)))return void alert("JCC: A popup relate element cannot be found - fix your HTML markup!");var t=!1,n=relateElement.parentNode;do{if(parent==n){t=!0;break}}while(n=n.parentNode);if(!t)return void alert("JCC: Popup parent node must be direct or indirect parent of the relate element!");currentPositioning="fixed"==jcc.getComputedStyle(relateElement,"position")?"window":"parent"}"window"!=currentPositioning||parent==document.body?(removeAnimationClasses(),readAnimation(),"none"!=animation&&(el.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&el.parentNode.classList.add(parentClass)),"window"==currentPositioning?(el.classList.remove("jcc-popup-position-parent"),el.classList.add("jcc-popup-position-window")):(el.classList.remove("jcc-popup-position-window"),el.classList.add("jcc-popup-position-parent")),el.classList.remove("jcc-popup-hidden"),pane&&(cancelable&&pane.addEventListener("click",onPaneClick,!1),pane.classList.remove("jcc-popup-pane-hidden")),pushFront(),recomputePosition(),"none"==animation?onInAnimationEnd():(el.classList.add("jcc-in"),e&&!reversedOut&&el.classList.add("jcc-back"),0==jcc.addAnimationEndListener(el,onInAnimationEnd,!1)&&onInAnimationEnd()),visible=!0,jcc.dispatchCustomEvent(el,"e-show",{bubbles:!1,cancelable:!1})):alert("JCC: A popup related to the window must be a direct child of document.body in order to work properly!")}},this.hide=function(e){if(el.popup&&visible)if(historyEnabled){var t=location.hash.substr(1),n=t.indexOf("?"),o="";n>-1&&(o=t.substr(n));for(var a=this.overrideHistoryState,i=jcc.historyStateCopy(jcc.currentHistoryState()),s=0;s<i.popups.length;s++)if(i.popups[s]==el.id){i.popups.splice(s,1);break}a?window.history.replaceState(null,"",jcc.historyStateToHash(i)+o):location.hash=jcc.historyStateToHash(i)+o}else this.__hide(e)},this.__hide=function(e,t){el.popup&&visible&&(unlinkRelateElementEvents(),el.removeEventListener("e-resized",onPopupResize),pane&&pane.removeEventListener("click",onPaneClick),jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),readAnimation(),"none"!=animation&&(el.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&el.parentNode.classList.add(parentClass)),pushBack(),"none"==animation?onOutAnimationEnd():(el.classList.add("jcc-out"),(t||reversedOut)&&el.classList.add("jcc-back"),0==jcc.addAnimationEndListener(el,onOutAnimationEnd,!1)&&onOutAnimationEnd()),visible=!1,jcc.dispatchCustomEvent(el,"e-hide",{bubbles:!1,cancelable:!1,detail:{result:e}}))},this.isVisible=function(){return visible&&el.popup}},jcc.widgets.icon={version:"1.0",can_enhance:function(e){return"I"==e.nodeName&&"icon"==e.getAttribute("data-role")},enhance:function(e){e.icon?e.icon.refresh():new jcc.icon(e).refresh()},unenhance:function(e){e.icon&&e.icon.destroy()}},jcc.icon=function(e){var t,n,o;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),e.icon=this,null!=e.dataset.rotate&&0!=e.dataset.rotate.length||(e.dataset.rotate=""),null==e.dataset.icon&&(e.dataset.icon=""),"horizontal"!=e.dataset.flip&&"vertical"!=e.dataset.flip&&(e.dataset.flip="none"),"auto"!=e.dataset.position&&"left"!=e.dataset.position&&"right"!=e.dataset.position&&(e.dataset.position="auto"),null!=e.dataset.animation&&0!=e.dataset.animation.length||(e.dataset.animation="none"),e.classList.add("jcc-icon"),e.classList.add("fa");var a=e.dataset.rotate;if(0==isNaN(parseFloat(a))){var i="rotate("+a+"deg)";o=jcc.setCss(e,{"-webkit-transform":i,"-moz-transform":i,transform:i})}e.dataset.icon.length>0&&(t=e.dataset.icon,e.classList.add(t)),"none"!=e.dataset.animation&&(n=e.dataset.animation,e.classList.add("jcc-icon-animation-"+n))},this.destroy=function(){e.icon&&(o&&(jcc.setCss(e,o),o=void 0),e.classList.remove("jcc-icon"),t&&e.classList.remove(t),n&&e.classList.remove("jcc-icon-animation-"+n),delete e.icon)}},jcc.widgets.checkbox={version:"1.0",can_enhance:function(e){return"LABEL"==e.nodeName&&"checkbox"==e.getAttribute("data-role")},enhance:function(e){e.checkbox?e.checkbox.refresh():new jcc.checkbox(e).refresh()},unenhance:function(e){e.checkbox&&e.checkbox.destroy()}},jcc.checkbox=function(e){var t,n;this.widget=jcc.widget,this.widget(e);var o=null;this.refresh=function(){this.destroy(),t=this.theme(),e.checkbox=this,e.classList.add("jcc-checkbox"),e.classList.add("jcc-checkbox-"+t),(o=e.querySelector("input[type=checkbox]"))&&(n=document.createElement("div"),jcc.insertAfter(n,o),n.classList.add("jcc-checkbox-checkmark-"+t),o.classList.add("jcc-checkbox-input-"+t))},this.destroy=function(){e.checkbox&&(e.classList.remove("jcc-checkbox"),e.classList.remove("jcc-checkbox-"+t),o&&(o.classList.remove("jcc-checkbox-input-"+t),o=null),delete e.checkbox),n&&(jcc.detach(n),n=null)},this.checked=function(){return!!o&&(arguments.length>0&&(o.checked=arguments[0]),o.checked)},this.disabled=function(){return!!o&&(arguments.length>0&&(o.disabled=arguments[0]),o.disabled)}},jcc.widgets.radio={version:"1.0",can_enhance:function(e){return"LABEL"==e.nodeName&&"radio"==e.getAttribute("data-role")},enhance:function(e){e.radio?e.radio.refresh():new jcc.radio(e).refresh()},unenhance:function(e){e.radio&&e.radio.destroy()}},jcc.radio=function(e){var t,n;this.widget=jcc.widget,this.widget(e);var o=null;this.refresh=function(){this.destroy(),t=this.theme(),e.radio=this,e.classList.add("jcc-radio"),e.classList.add("jcc-radio-"+t),(o=e.querySelector("input[type=radio]"))&&(n=document.createElement("div"),jcc.insertAfter(n,o),n.classList.add("jcc-radio-checkmark-"+t),o.classList.add("jcc-radio-input-"+t))},this.destroy=function(){e.radio&&(e.classList.remove("jcc-radio"),e.classList.remove("jcc-radio-"+t),o&&(o.classList.remove("jcc-radio-input-"+t),o=null),delete e.radio),n&&(jcc.detach(n),n=null)},this.checked=function(){return!!o&&(arguments.length>0&&(o.checked=arguments[0]),o.checked)},this.disabled=function(){return!!o&&(arguments.length>0&&(o.disabled=arguments[0]),o.disabled)}},jcc.widgets.progressbar={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"progressbar"==e.getAttribute("data-role")},enhance:function(e){e.progressbar?e.progressbar.refresh():new jcc.progressbar(e).refresh()},unenhance:function(e){e.progressbar&&e.progressbar.destroy()}},jcc.progressbar=function(e){var t,n,o,a;function i(e){o&&(o.style.width=e+"%")}function s(e){a&&(a.style.width=e+"%")}this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),t=this.theme(),e.progressbar=this,"yes"!=e.dataset.indeterminate&&"no"!=e.dataset.indeterminate&&(e.dataset.indeterminate="no"),e.dataset.value||(e.dataset.value="0"),e.dataset.secondaryValue||(e.dataset.secondaryValue="0"),n="yes"==e.dataset.indeterminate,a=document.createElement("div"),e.appendChild(a),o=document.createElement("div"),e.appendChild(o),e.classList.add("jcc-progress-bar-"+t),n?e.classList.add("jcc-progress-bar-indeterminate-"+t):(e.classList.add("jcc-progress-bar-determinate-"+t),i(this.value()),s(this.svalue()))},this.destroy=function(){e.progressbar&&(e.classList.remove("jcc-progress-bar-"+t),n?e.classList.remove("jcc-progress-bar-indeterminate-"+t):e.classList.remove("jcc-progress-bar-determinate-"+t),delete e.progressbar),o&&(jcc.detach(o),o=null),a&&(jcc.detach(a),a=null)},this.value=function(){if(n)return 0;var t=e.hasAttribute("data-value")?parseInt(e.getAttribute("data-value")):0;return arguments.length>0&&(t=arguments[0]),t=t<0||isNaN(t)?0:t>100?100:t,arguments.length>0&&(e.setAttribute("data-value",t),i(t)),t},this.svalue=function(){if(n)return 0;var t=e.hasAttribute("data-secondary-value")?parseInt(e.getAttribute("data-secondary-value")):0;return arguments.length>0&&(t=arguments[0]),t=t<0||isNaN(t)?0:t>100?100:t,arguments.length>0&&(e.setAttribute("data-secondary-value",t),s(t)),t}},jcc.widgets.range={version:"1.0",can_enhance:function(e){return"INPUT"==e.nodeName&&"range"==e.getAttribute("type")&&"range"==e.getAttribute("data-role")},enhance:function(e){e.range?e.range.refresh():new jcc.range(e).refresh()},unenhance:function(e){e.range&&e.range.destroy()}},jcc.range=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),t=this.theme(),e.range=this,e.classList.add("jcc-range-"+t)},this.destroy=function(){e.range&&(e.classList.remove("jcc-range-"+t),delete e.range)}},jcc.widgets.dropdown={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"dropdown"==e.getAttribute("data-role")},enhance:function(e){e.dropdown?e.dropdown.refresh():new jcc.dropdown(e).refresh()},unenhance:function(e){e.dropdown&&e.dropdown.destroy()}},jcc.dropdown=function(e){var t;this.widget=jcc.widget,this.widget(e);var n,o=null,a=null;this.refresh=function(){this.destroy(),t=this.theme(),e.dropdown=this,n=document.createElement("div"),e.classList.add("jcc-dropdown-"+t),o=e.querySelector("select"),jcc.insertAfter(n,o),(a=e.querySelector("i[data-role='icon']"))&&e.classList.add("jcc-dropdown-iconic")},this.destroy=function(){e.dropdown&&(e.classList.remove("jcc-dropdown-"+t),a&&(e.classList.remove("jcc-dropdown-iconic"),a=null),o=null,delete e.dropdown),n&&(jcc.detach(n),n=null)},this.selectedIndex=function(){return o?(arguments.length>0&&(o.selectedIndex=arguments[0]),o.selectedIndex):-1},this.disabled=function(){return!!o&&(arguments.length>0&&(o.disabled=arguments[0]),o.disabled)}},jcc.widgets.flipswitch={version:"1.0",can_enhance:function(e){return"LABEL"==e.nodeName&&"flipswitch"==e.getAttribute("data-role")},enhance:function(e){e.flipswitch?e.flipswitch.refresh():new jcc.flipswitch(e).refresh()},unenhance:function(e){e.flipswitch&&e.flipswitch.destroy()}},jcc.flipswitch=function(e){var t,n;this.widget=jcc.widget,this.widget(e);var o=null;this.refresh=function(){this.destroy(),t=this.theme(),e.flipswitch=this,e.classList.add("jcc-flipswitch"),(o=e.querySelector("input[type=checkbox]"))&&(n=document.createElement("div"),jcc.insertAfter(n,o),n.classList.add("jcc-flipswitch-toggle-"+t),o.classList.add("jcc-flipswitch-input-"+t))},this.destroy=function(){e.flipswitch&&(e.classList.remove("jcc-flipswitch"),o&&(o.classList.remove("jcc-flipswitch-input-"+t),o=null),delete e.flipswitch),n&&(jcc.detach(n),n=null)},this.checked=function(){return!!o&&(arguments.length>0&&(o.checked=arguments[0]),o.checked)},this.disabled=function(){return!!o&&(arguments.length>0&&(o.disabled=arguments[0]),o.disabled)}},jcc.widgets.inputfield={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"inputfield"==e.getAttribute("data-role")},enhance:function(e){e.inputfield?e.inputfield.refresh():new jcc.inputfield(e).refresh()},unenhance:function(e){e.inputfield&&e.inputfield.destroy()}},jcc.inputfield=function(e){var t;this.widget=jcc.widget,this.widget(e);var n,o,a,i=null,s=null;function r(e){jcc.datetime(i,jcc.options.datetime.DIALOG_MODE.DATE),e.preventDefault(),e.stopPropagation()}function c(e){jcc.datetime(i,jcc.options.datetime.DIALOG_MODE.TIME),e.preventDefault(),e.stopPropagation()}function l(e){jcc.datetime(i,jcc.options.datetime.DIALOG_MODE.DATE|jcc.options.datetime.DIALOG_MODE.TIME),e.preventDefault(),e.stopPropagation()}function d(e){jcc.colorpicker(i,jcc.options.colorpicker.COLOR_FORMAT.HEX),e.preventDefault(),e.stopPropagation()}this.refresh=function(){this.destroy(),t=this.theme(),e.inputfield=this,"normal"!=e.dataset.isotope&&"underscore"!=e.dataset.isotope&&(e.dataset.isotope="normal"),(i=e.querySelector("input"))&&(o=document.createElement("div"),jcc.insertAfter(o,i),e.classList.add("jcc-inputfield-"+t),i.classList.add("jcc-inputfield-input-"+t),"date"!=(n=(n=i.getAttribute("type")).toLowerCase())||jcc.inputTypeSupported(n)&&!jcc.options.datetime.overrideDefaultInputType?"time"!=n||jcc.inputTypeSupported(n)&&!jcc.options.datetime.overrideDefaultInputType?"datetime"!=n&&"datetime-local"!=n||jcc.inputTypeSupported(n)&&!jcc.options.datetime.overrideDefaultInputType?"color"!=n||jcc.inputTypeSupported(n)&&!jcc.options.colorpicker.overrideDefaultInputType||(i.setAttribute("readonly","readonly"),i.setAttribute("type","text"),i.addEventListener("focus",d,!1)):(i.setAttribute("readonly","readonly"),i.setAttribute("type","text"),i.addEventListener("focus",l,!1)):(i.setAttribute("readonly","readonly"),i.setAttribute("type","text"),i.addEventListener("focus",c,!1)):(i.setAttribute("readonly","readonly"),i.setAttribute("type","text"),i.addEventListener("focus",r,!1)),(s=e.querySelector("i[data-role='icon']"))&&(a="right"!=s.dataset.position?"left":"right",i.classList.add("jcc-inputfield-iconic-"+a)))},this.destroy=function(){e.inputfield&&(e.classList.remove("jcc-inputfield-"+t),i&&(i.classList.remove("jcc-inputfield-input-"+t),"date"!=n||jcc.inputTypeSupported(n)&&!jcc.options.datetime.overrideDefaultInputType?"time"!=n||jcc.inputTypeSupported(n)&&!jcc.options.datetime.overrideDefaultInputType?"datetime"!=n&&"datetime-local"!=n||jcc.inputTypeSupported(n)&&!jcc.options.datetime.overrideDefaultInputType?"color"!=n||jcc.inputTypeSupported(n)&&!jcc.options.colorpicker.overrideDefaultInputType||(i.setAttribute("type",n),i.removeEventListener("focus",d)):(i.setAttribute("type",n),i.removeEventListener("focus",l)):(i.setAttribute("type",n),i.removeEventListener("focus",c)):(i.setAttribute("type",n),i.removeEventListener("focus",r)),s&&(i.classList.remove("jcc-inputfield-iconic-"+a),s=null),i=null),delete e.inputfield),o&&(jcc.detach(o),o=null)},this.value=function(){var e=arguments.length>0?arguments[0]:i?i.value:"";return i&&arguments.length>0&&(i.value=e),e},this.disabled=function(){return!!i&&(arguments.length>0&&(i.disabled=arguments[0]),i.disabled)}},jcc.widgets.textarea={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"textarea"==e.getAttribute("data-role")},enhance:function(e){e.textarea?e.textarea.refresh():new jcc.textarea(e).refresh()},unenhance:function(e){e.textarea&&e.textarea.destroy()}},jcc.textarea=function(e){var t;this.widget=jcc.widget,this.widget(e);var n,o=null,a=null;this.refresh=function(){this.destroy(),t=this.theme(),e.textarea=this,e.classList.add("jcc-textarea-"+t),(o=e.querySelector("textarea"))&&(a=e.querySelector("i[data-role='icon']"))&&(n="right"!=a.dataset.position?"left":"right",o.classList.add("jcc-textarea-iconic-"+n))},this.destroy=function(){e.textarea&&(e.classList.remove("jcc-textarea-"+t),o&&(a&&(o.classList.remove("jcc-textarea-iconic-"+n),a=null),o=null),delete e.textarea)},this.value=function(){var e=arguments.length>0?arguments[0]:o?o.value:"";return o&&arguments.length>0&&(o.value=e),e},this.disabled=function(){return!!o&&(arguments.length>0&&(o.disabled=arguments[0]),o.disabled)}},jcc.widgets.button={version:"1.0",can_enhance:function(e){return("LABEL"==e.nodeName||"A"==e.nodeName)&&"button"==e.getAttribute("data-role")},enhance:function(e){e.button?e.button.refresh():new jcc.button(e).refresh()},unenhance:function(e){e.button&&e.button.destroy()}},jcc.button=function(e){var t,n,o;this.widget=jcc.widget,this.widget(e),this.refresh=function(){if(this.destroy(),t=this.theme(),"flat"!=e.dataset.corners&&"smooth"!=e.dataset.corners&&"round"!=e.dataset.corners&&(e.dataset.corners="smooth"),"yes"!=e.dataset.action&&"no"!=e.dataset.action&&(e.dataset.action="no"),"yes"!=e.dataset.sized&&"no"!=e.dataset.sized&&(e.dataset.sized="no"),null!=e.dataset.isotope&&0!=e.dataset.isotope.length||(e.dataset.isotope="normal"),e.button=this,n=document.createElement("div"),o=e.querySelector("button"))jcc.insertAfter(n,o);else{var a=e.querySelector("i");if(a)jcc.insertBefore(n,a);else{var i=e.querySelector("span");i&&jcc.insertBefore(n,i)}}null!=e.dataset.backgroundColor&&e.dataset.backgroundColor.length>0&&(n.style.backgroundColor=e.dataset.backgroundColor),e.classList.add("jcc-button"),e.classList.add("jcc-button-"+t)},this.destroy=function(){e.button&&(e.classList.remove("jcc-button"),e.classList.remove("jcc-button-"+t),delete e.button),n&&(jcc.detach(n),n=null),o=null},this.disabled=function(){return!!o&&(arguments.length>0&&(o.disabled=arguments[0]),o.disabled)}},jcc.widgets.delimiter={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"delimiter"==e.getAttribute("data-role")},enhance:function(e){e.delimiter?e.delimiter.refresh():new jcc.delimiter(e).refresh()},unenhance:function(e){e.delimiter&&e.delimiter.destroy()}},jcc.delimiter=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),t=this.theme(),e.delimiter=this,e.dataset.colors||(e.dataset.colors=""),e.dataset.thickness||(e.dataset.thickness="1"),e.classList.add("jcc-delimiter-"+t);var n=parseInt(e.dataset.thickness);(isNaN(n)||n<0)&&(n=1),"vertical"==e.dataset.orientation?(e.style.width=n+"px",e.dataset.colors.length>0&&(e.style.background="-moz-linear-gradient(to bottom, "+e.dataset.colors+")",e.style.background="-webkit-linear-gradient(to bottom, "+e.dataset.colors+")",e.style.background="linear-gradient(to bottom, "+e.dataset.colors+")")):(e.style.height=n+"px",e.dataset.colors.length>0&&(e.style.background="-moz-linear-gradient(to right, "+e.dataset.colors+")",e.style.background="-webkit-linear-gradient(to right, "+e.dataset.colors+")",e.style.background="linear-gradient(to right, "+e.dataset.colors+")"))},this.destroy=function(){e.delimiter&&(e.classList.remove("jcc-delimiter-"+t),e.style.width="",e.style.height="",e.style.background="",delete e.delimiter)}},jcc.widgets.triangle={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"triangle"==e.getAttribute("data-role")},enhance:function(e){e.triangle?e.triangle.refresh():new jcc.triangle(e).refresh()},unenhance:function(e){e.triangle&&e.triangle.destroy()}},jcc.triangle=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),t=this.theme(),e.triangle=this,"left"!=e.dataset.direction&&"right"!=e.dataset.direction&&"top"!=e.dataset.direction&&"bottom"!=e.dataset.direction&&(e.dataset.direction="left"),e.classList.add("jcc-triangle-"+t)},this.destroy=function(){e.triangle&&(e.classList.remove("jcc-triangle-"+t),delete e.triangle)}},jcc.widgets.dragon={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"dragon"==e.getAttribute("data-role")},enhance:function(e){e.dragon?e.dragon.refresh():new jcc.dragon(e).refresh()},unenhance:function(e){e.dragon&&e.dragon.destroy()}},jcc.dragon=function(el){this.widget=jcc.widget,this.widget(el);var MOVED_THRESHOLD=2,directions,rectConstraint,parentPointerAnchor,movable,position,s_left,s_top,prex,prey,gainx,gainy,will_move,parent,pixelsMoved;function prepareMovableAndParent(){movable.classList.remove("jcc-dragon-make-it-movable"),parent.classList.remove("jcc-dragon-make-it-movable-host"),"static"==(position=jcc.getComputedStyle(movable,"position"))&&(movable.classList.add("jcc-dragon-make-it-movable"),position="absolute"),"absolute"==position&&"static"==jcc.getComputedStyle(parent,"position")&&parent!=document.body&&parent.classList.add("jcc-dragon-make-it-movable-host")}function onPlayersResize(e){prepareMovableAndParent();var t=jcc.getElementLocalRect(movable),n=t.width,o=t.height,a="absolute"==position?jcc.getElementLocalRect(parent):jcc.getViewportRect();if(directions.x){var i=parseInt(jcc.getComputedStyle(movable,"left")),s=!1;isNaN(rectConstraint.right)||i+n>a.right-rectConstraint.right&&(i=a.right-n-rectConstraint.right,s=!0),isNaN(rectConstraint.left)||i<a.left+rectConstraint.left&&(i=a.left+rectConstraint.left,s=!0),1==s&&(movable.style.left=i+"px")}if(directions.y){var r=parseInt(jcc.getComputedStyle(movable,"top"));isNaN(rectConstraint.bottom)||r+o>a.bottom-rectConstraint.bottom&&(r=a.bottom-o-rectConstraint.bottom,s=!0),isNaN(rectConstraint.top)||r<a.top+rectConstraint.top&&(r=a.top+rectConstraint.top,s=!0),1==s&&(movable.style.top=r+"px")}}function onElementClick(e){pixelsMoved>MOVED_THRESHOLD&&(pixelsMoved=0,e.preventDefault(),e.stopPropagation())}function onElementPointerDown(e){var t,n;will_move||(e.touches&&e.touches.length>1||parentPointerAnchor||(prepareMovableAndParent(),e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),t-=window.pageXOffset,n-=window.pageYOffset,prex=t,prey=n,pixelsMoved=0,gainx=gainy=0,s_left=parseInt(jcc.getComputedStyle(movable,"left")),s_top=parseInt(jcc.getComputedStyle(movable,"top")),(directions.x||directions.y)&&(will_move=!0,jcc.dispatchCustomEvent(movable,"e-dragstart",{bubbles:!1,cancelable:!1}),jcc.dispatchCustomEvent(movable,"e-drag",{bubbles:!1,cancelable:!1}))))}function onDocumentPointerDown(e){if(!will_move&&!(e.touches&&e.touches.length>1)&&parentPointerAnchor&&jcc.isVisible(movable)){var t,n;prepareMovableAndParent(),e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),t-=window.pageXOffset,n-=window.pageYOffset,pixelsMoved=0;var o=jcc.getElementRect(movable),a=o.width,i=o.height,s=jcc.getElementRect(parent),r="absolute"==position?jcc.getElementLocalRect(parent):jcc.getViewportRect();if("absolute"!=position||!(t<s.left||t>s.right||n<s.top||n>s.bottom)||!(t<o.left||t>o.right||n<o.top||n>o.bottom)){prex=t,prey=n,gainx=gainy=0;var c="absolute"==position?t-s.left:t-window.pageXOffset,l="absolute"==position?n-s.top:n-window.pageYOffset;"left"==parentPointerAnchor.x?c-=0:"center"==parentPointerAnchor.x?c-=Math.round(a/2):"right"==parentPointerAnchor.x?c-=a:c-=parentPointerAnchor.x,"top"==parentPointerAnchor.y?l-=0:"center"==parentPointerAnchor.y?l-=Math.round(i/2):"bottom"==parentPointerAnchor.y?l-=i:l-=parentPointerAnchor.y,directions.x&&(isNaN(rectConstraint.right)||c+a>r.right-rectConstraint.right&&(gainx=-(r.right-rectConstraint.right-(c+a)),c=r.right-a-rectConstraint.right),isNaN(rectConstraint.left)||c<r.left+rectConstraint.left&&(gainx=-(r.left+rectConstraint.left-c),c=r.left+rectConstraint.left),movable.style.left=c+"px",s_left=c,will_move=!0),directions.y&&(isNaN(rectConstraint.bottom)||l+i>r.bottom-rectConstraint.bottom&&(gainy=-(r.bottom-rectConstraint.bottom-(l+i)),l=r.bottom-i-rectConstraint.bottom),isNaN(rectConstraint.top)||l<r.top+rectConstraint.top&&(gainy=-(r.top+rectConstraint.top-l),l=r.top+rectConstraint.top),movable.style.top=l+"px",s_top=l,will_move=!0),will_move&&(jcc.dispatchCustomEvent(movable,"e-dragstart",{bubbles:!1,cancelable:!1}),jcc.dispatchCustomEvent(movable,"e-drag",{bubbles:!1,cancelable:!1}))}}}function onDocumentPointerMove(e){if(will_move&&!(e.touches&&e.touches.length>1)){var t,n;e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),t-=window.pageXOffset,n-=window.pageYOffset;var o=jcc.getElementLocalRect(movable),a=o.width,i=o.height,s="absolute"==position?jcc.getElementLocalRect(parent):jcc.getViewportRect();if(directions.x){var r=t-prex;pixelsMoved+=Math.abs(r);var c=s_left+(gainx+=r);isNaN(rectConstraint.right)||c+a>s.right-rectConstraint.right&&(c=s.right-a-rectConstraint.right),isNaN(rectConstraint.left)||c<s.left+rectConstraint.left&&(c=s.left+rectConstraint.left),movable.style.left=c+"px"}if(prex=t,directions.y){var l=n-prey;pixelsMoved+=Math.abs(l);var d=s_top+(gainy+=l);isNaN(rectConstraint.bottom)||d+i>s.bottom-rectConstraint.bottom&&(d=s.bottom-i-rectConstraint.bottom),isNaN(rectConstraint.top)||d<s.top+rectConstraint.top&&(d=s.top+rectConstraint.top),movable.style.top=d+"px"}prey=n,jcc.dispatchCustomEvent(movable,"e-drag",{bubbles:!1,cancelable:!1})}}function onDocumentPointerUp(e){will_move&&(jcc.dispatchCustomEvent(movable,"e-dragend",{bubbles:!1,cancelable:!1}),will_move=!1)}function onEDragstart(event){movable.dataset.eDragstart&&movable.dataset.eDragstart.length>0&&eval(movable.dataset.eDragstart)}function onEDrag(event){movable.dataset.eDrag&&movable.dataset.eDrag.length>0&&eval(movable.dataset.eDrag)}function onEDragend(event){movable.dataset.eDragend&&movable.dataset.eDragend.length>0&&eval(movable.dataset.eDragend)}this.refresh=function(){if(this.destroy(),(movable=el.parentNode)!=document.body){if(parent=movable.parentNode,el.dragon=this,null!=el.dataset.rectConstraint&&0!=el.dataset.rectConstraint.length||(el.dataset.rectConstraint="left:none right:none top:none bottom:none"),null!=el.dataset.directions&&0!=el.dataset.directions.length||(el.dataset.directions="h v"),null==el.dataset.parentPointerAnchor&&(el.dataset.parentPointerAnchor=""),rectConstraint={left:"none",right:"none",top:"none",bottom:"none"},(o=el.dataset.rectConstraint.toLowerCase().split(" ")).length>0)for(var e=0;e<o.length;e++){var t=o[e].split(":");if("left"==t[0]||"right"==t[0]||"top"==t[0]||"bottom"==t[0]){var n=parseInt(t[1]);isNaN(n)||(rectConstraint[t[0]]=n)}}if(el.dataset.parentPointerAnchor.length>0)parentPointerAnchor={x:"center",y:"center"},(o=el.dataset.parentPointerAnchor.toLowerCase().split(" "))[0]&&("left"==o[0]||"center"==o[0]||"right"==o[0]?parentPointerAnchor.x=o[0]:(parentPointerAnchor.x=parseInt(o[0]),parentPointerAnchor.x=isNaN(parentPointerAnchor.x)?"center":parentPointerAnchor.x)),o[1]&&("top"==o[1]||"center"==o[1]||"bottom"==o[1]?parentPointerAnchor.y=o[1]:(parentPointerAnchor.y=parseInt(o[1]),parentPointerAnchor.y=isNaN(parentPointerAnchor.y)?"center":parentPointerAnchor.y));directions={x:!1,y:!1};var o=el.dataset.directions.toLowerCase().split(" ");for(e=0;e<o.length;e++){var a=o[e];"h"==a?directions.x=!0:"v"==a&&(directions.y=!0)}el.classList.add("jcc-dragon"),directions.x&&directions.y?el.classList.add("jcc-dragon-hv"):directions.x?el.classList.add("jcc-dragon-h"):directions.y&&el.classList.add("jcc-dragon-v"),pixelsMoved=0,document.addEventListener("mousedown",onDocumentPointerDown,{passive:!1,capture:!1}),document.addEventListener("touchstart",onDocumentPointerDown,{passive:!1,capture:!1}),el.addEventListener("mousedown",onElementPointerDown,!1),el.addEventListener("touchstart",onElementPointerDown,!1),el.addEventListener("click",onElementClick,!1),document.addEventListener("mousemove",onDocumentPointerMove,{passive:!1,capture:!1}),document.addEventListener("touchmove",onDocumentPointerMove,{passive:!1,capture:!1}),document.addEventListener("mouseup",onDocumentPointerUp,{passive:!1,capture:!1}),document.addEventListener("touchend",onDocumentPointerUp,{passive:!1,capture:!1}),movable.addEventListener("e-dragstart",onEDragstart,!1),movable.addEventListener("e-drag",onEDrag,!1),movable.addEventListener("e-dragend",onEDragend,!1),parent.addEventListener("e-resized",onPlayersResize,!1),movable.addEventListener("e-resized",onPlayersResize,!1),jcc.resizeMonitor.addElement(parent),jcc.resizeMonitor.addElement(movable)}else alert("JCC: document.body element cannot be dragged using the 'dragon' widget!")},this.destroy=function(){el.dragon&&(el.classList.remove("jcc-dragon"),directions.x&&directions.y?el.classList.remove("jcc-dragon-hv"):directions.x?el.classList.remove("jcc-dragon-h"):directions.y&&el.classList.remove("jcc-dragon-v"),jcc.resizeMonitor.removeElement(parent),parent.removeEventListener("e-resized",onPlayersResize),movable.removeEventListener("e-resized",onPlayersResize),document.removeEventListener("mousedown",onDocumentPointerDown),document.removeEventListener("touchstart",onDocumentPointerDown),el.removeEventListener("mousedown",onElementPointerDown),el.removeEventListener("touchstart",onElementPointerDown),el.removeEventListener("click",onElementClick),document.removeEventListener("mousemove",onDocumentPointerMove),document.removeEventListener("touchmove",onDocumentPointerMove),document.removeEventListener("mouseup",onDocumentPointerUp),document.removeEventListener("touchend",onDocumentPointerUp),movable&&(movable.removeEventListener("e-dragstart",onEDragstart),movable.removeEventListener("e-drag",onEDrag),movable.removeEventListener("e-dragend",onEDragend),movable.classList.remove("jcc-dragon-make-it-movable"),movable=null),parent&&(parent.classList.remove("jcc-dragon-make-it-movable-host"),parent=null),delete el.dragon)}},jcc.widgets.pageview={version:"1.0",can_enhance:function(e){return("BODY"==e.nodeName||"DIV"==e.nodeName)&&"pageview"==e.getAttribute("data-role")},enhance:function(e){e.pageview?e.pageview.refresh():new jcc.pageview(e).refresh()},unenhance:function(e){e.pageview&&e.pageview.destroy()}},jcc.pageview=function(el){var animation;function onEChanged(event){el.dataset.page=event.detail.page,el.dataset.eChanged&&el.dataset.eChanged.length>0&&eval(el.dataset.eChanged)}this.widget=jcc.widget,this.widget(el),this.refresh=function(){this.destroy(),el.pageview=this,el.dataset.page||(el.dataset.page=""),el.dataset.animation&&0!=el.dataset.animation.length||(el.dataset.animation="none"),"yes"!=el.dataset.history&&"no"!=el.dataset.history&&(el.dataset.history="yes"),animation=el.dataset.animation,el.classList.add("jcc-pageview"),el.addEventListener("e-changed",onEChanged,!1)},this.destroy=function(){el.removeEventListener("e-changed",onEChanged),el.pageview&&(el.classList.remove("jcc-pageview"),delete el.pageview)},this.page=function(e,t){if(0==arguments.length)return el.dataset.page;if(e&&e.length>0){var n=document.getElementById(e);if(n&&n.page&&!n.page.isLoaded())if("yes"==el.dataset.history){var o=location.hash.substr(1),a=o.indexOf("?"),i="";if(a>-1&&(i=o.substr(a)),t){var s=jcc.historyStateCopy(jcc.currentHistoryState());s.page=n.id,window.history.replaceState(null,"",jcc.historyStateToHash(s)+i)}else location.hash="#"+n.id+i}else{var r=this.page(),c=document.getElementById(r),l=!1;if(c&&c.page&&c.page.isLoaded()){for(var d=-1,h=-1,p=el.querySelectorAll("*[data-role='page']"),u=0;u<p.length;u++)if(p[u]==c?d=u:p[u]==n&&(h=u),h>-1&&d>-1){l=h<d;break}c.page.__unload(l)}n.page.__load(l)}}}},jcc.widgets.page={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"page"==e.getAttribute("data-role")},enhance:function(e){e.page?e.page.refresh():new jcc.page(e).refresh()},unenhance:function(e){e.page&&e.page.destroy()}},jcc.page=function(el){var pageview,loaded,animation,parentClass;function onELoad(event){el.dataset.eLoad&&el.dataset.eLoad.length>0&&eval(el.dataset.eLoad)}function onEUnload(event){el.dataset.eUnload&&el.dataset.eUnload.length>0&&eval(el.dataset.eUnload)}function onOutAnimationEnd(){el.page&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),el.classList.add("jcc-page-hidden"))}function removeAnimationClasses(){el.classList.remove("jcc-animation-"+animation),el.classList.remove("jcc-in"),el.classList.remove("jcc-out"),el.classList.remove("jcc-back"),parentClass&&""!=parentClass&&(el.parentNode.classList.remove(parentClass),parentClass=null)}function readAnimation(){(animation=el.dataset.animation)||(animation=el.parentNode.dataset.animation)||(animation="none"),(animation=jcc.animations[animation])?(animation=animation.suffix,parentClass=animation.parentClass):(animation="none",parentClass=null)}this.container=jcc.container,this.container(el),this.super_refresh=this.refresh,this.super_destroy=this.destroy,this.setOptions=function(e){var t=!1;for(var n in e)"number"!=typeof e[n]&&"string"!=typeof e[n]||(el.dataset[n]=e[n].toString()),"animation"!=n&&(t=!0);t&&this.refresh()},this.pageview=function(){return pageview},this.refresh=function(){el.id&&0!=el.id.length?el.id.indexOf("|")>0?alert("JCC: A 'page' may not contain | in its ID as it is reserved for URL encoding!"):"pageview"==el.parentNode.dataset.role?(this.destroy(),this.super_refresh(),el.page=this,loaded=!1,pageview=el.parentNode.pageview,el.classList.add("jcc-page"),el.classList.add("jcc-page-hidden"),el.addEventListener("e-load",onELoad,!1),el.addEventListener("e-unload",onEUnload,!1),pageview.page()==el.id&&("yes"==pageview.element().dataset.history&&""!=location.hash&&""!=location.hash.substr(1)||pageview.page(el.id,!0))):alert("JCC: A 'page' can exist only as a direct child of a 'pageview'! Please fix your HTML markup!"):alert("JCC: Each 'page' should have its unique 'id' attribute in the HTML markup!")},this.load=function(e){el.page&&!loaded&&pageview.page(el.id,e)},this.__load=function(e){el.page&&!loaded&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),readAnimation(),"none"!=animation&&(el.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&el.parentNode.classList.add(parentClass)),el.classList.remove("jcc-page-hidden"),el.classList.remove("jcc-page-front"),el.classList.add("jcc-in"),e&&el.classList.add("jcc-back"),loaded=!0,pageview.element().dataset.page=el.id,jcc.dispatchCustomEvent(el,"e-load",{bubbles:!1,cancelable:!1}),jcc.dispatchCustomEvent(pageview.element(),"e-changed",{bubbles:!1,cancelable:!1,detail:{page:el.id}}))},this.__unload=function(e){el.page&&loaded&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),readAnimation(),"none"!=animation&&(el.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&el.parentNode.classList.add(parentClass)),el.classList.add("jcc-page-front"),"none"==animation?onOutAnimationEnd():(el.classList.add("jcc-out"),e&&el.classList.add("jcc-back"),0==jcc.addAnimationEndListener(el,onOutAnimationEnd,!1)&&onOutAnimationEnd()),loaded=!1,jcc.dispatchCustomEvent(el,"e-unload",{bubbles:!1,cancelable:!1}))},this.isLoaded=function(){return loaded&&el.page},this.destroy=function(){this.super_destroy(),el.removeEventListener("e-load",onELoad),el.removeEventListener("e-unload",onEUnload),jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),pageview&&(pageview=null),el.page&&(el.classList.remove("jcc-page"),el.classList.remove("jcc-page-hidden"),el.classList.remove("jcc-page-front"),delete el.page)}},jcc.widgets.toolbar={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"toolbar"==e.getAttribute("data-role")},enhance:function(e){e.toolbar?e.toolbar.refresh():new jcc.toolbar(e).refresh()},unenhance:function(e){e.toolbar&&e.toolbar.destroy()}},jcc.toolbar=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){(this.destroy(),e.toolbar=this,t=this.theme(),"yes"!=e.dataset.fixed&&"no"!=e.dataset.fixed&&(e.dataset.fixed="no"),"horizontal"!=e.dataset.orientation&&"vertical"!=e.dataset.orientation&&(e.dataset.orientation="horizontal"),"tiny"!=e.dataset.size&&"small"!=e.dataset.size&&"medium"!=e.dataset.size&&"large"!=e.dataset.size&&"huge"!=e.dataset.size&&(e.dataset.size="medium"),"horizontal"==e.dataset.orientation?"top"!=e.dataset.position&&"bottom"!=e.dataset.position&&(e.dataset.position="top"):"left"!=e.dataset.position&&"right"!=e.dataset.position&&(e.dataset.position="left"),"yes"!=e.dataset.fixed)&&("static"==jcc.getComputedStyle(e.parentNode,"position")&&"BODY"!=e.parentNode.nodeName&&e.parentNode.classList.add("jcc-toolbar-parent-relative"));e.classList.add("jcc-toolbar"),e.classList.add("jcc-toolbar-"+t)},this.destroy=function(){e.toolbar&&(e.classList.remove("jcc-toolbar"),e.classList.remove("jcc-toolbar-"+t),delete e.toolbar)}},jcc.widgets["iconic-link"]={version:"1.0",can_enhance:function(e){return"A"==e.nodeName&&"iconic-link"==e.getAttribute("data-role")},enhance:function(e){e.iconicLink?e.iconicLink.refresh():new jcc.iconicLink(e).refresh()},unenhance:function(e){e.iconicLink&&e.iconicLink.destroy()}},jcc.iconicLink=function(e){this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),e.iconicLink=this,this.theme(),e.classList.add("jcc-iconic-link")},this.destroy=function(){e.iconicLink&&(e.classList.remove("jcc-iconic-link"),delete e.iconicLink)}},jcc.widgets.scrollable={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"scrollable"==e.getAttribute("data-role")},enhance:function(e){e.scrollable?e.scrollable.refresh():new jcc.scrollable(e).refresh()},unenhance:function(e){e.scrollable&&e.scrollable.destroy()}},jcc.scrollable=function(el){var theme,contents,hscroll,vscroll,hdragon,vdragon,frameH,offsetH,velocityH,amplitudeH,prevX,targetScrollLeft,frameV,offsetV,velocityV,amplitudeV,prevY,targetScrollTop,pressed,timestamp,continueTrackVelocity,mouseWheel,canScrollH,canScrollV,scrollbarsVisible,kinetics,movedDeltaH,movedDeltaV;this.widget=jcc.widget,this.widget(el);var timeConstant=325,hideScrollbarsAfter=250,hideTimeout,scrollbarsVisibility,MAX_VELOCITY=1e3,WHEEL_SCROLL_SPEED=250,MIN_WHEEL_SCROLL_STEP=30,startSmoothScrollTop,startSmoothScrollLeft,smoothScrollFrame,smoothScrollStartTime,shoothScrolling,wheelScrollStep,MOVED_THRESHOLD=2;function adjustScrollbars(){var e=jcc.getElementLocalRect(contents);if(canScrollH){var t=Math.round(Math.max(e.width/contents.scrollWidth*e.width,20)),n=Math.round((e.width-t)/(contents.scrollWidth-e.width)*contents.scrollLeft);hscroll.style.width=t+"px",hscroll.style.left=n+"px",e.width>=contents.scrollWidth||e.width<t?hscroll.classList.add("jcc-hidden-scroll"):0!=scrollbarsVisibility&&hscroll.classList.remove("jcc-hidden-scroll")}if(canScrollV){var o=Math.round(Math.max(e.height/contents.scrollHeight*e.height,20)),a=Math.round((e.height-o)/(contents.scrollHeight-e.height)*contents.scrollTop);vscroll.style.height=o+"px",vscroll.style.top=a+"px",e.height>=contents.scrollHeight||e.height<o?vscroll.classList.add("jcc-hidden-scroll"):0!=scrollbarsVisibility&&vscroll.classList.remove("jcc-hidden-scroll")}}function removeScrollbarsAnimation(){canScrollH&&hscroll&&(hscroll.classList.remove("jcc-animation-slow-fade"),hscroll.classList.remove("jcc-in"),hscroll.classList.remove("jcc-out")),canScrollV&&vscroll&&(vscroll.classList.remove("jcc-animation-slow-fade"),vscroll.classList.remove("jcc-in"),vscroll.classList.remove("jcc-out"))}function showScrollbars(){1!=scrollbarsVisibility||scrollbarsVisible||(scrollbarsVisible=!0,removeScrollbarsAnimation(),canScrollH&&hscroll&&(hscroll.classList.remove("jcc-scroll-transparent"),hscroll.classList.add("jcc-animation-slow-fade"),hscroll.classList.add("jcc-in")),canScrollV&&vscroll&&(vscroll.classList.remove("jcc-scroll-transparent"),vscroll.classList.add("jcc-animation-slow-fade"),vscroll.classList.add("jcc-in")))}function hideScrollbars(){1==scrollbarsVisibility&&scrollbarsVisible&&(scrollbarsVisible=!1,removeScrollbarsAnimation(),canScrollH&&hscroll&&(hscroll.classList.add("jcc-animation-slow-fade"),hscroll.classList.add("jcc-out")),canScrollV&&vscroll&&(vscroll.classList.add("jcc-animation-slow-fade"),vscroll.classList.add("jcc-out")))}function resetHideTimeout(){clearTimeout(hideTimeout),hideTimeout=setTimeout(hideScrollbars,hideScrollbarsAfter)}function computeWheelScrollStep(){wheelScrollStep=Math.floor(Math.max(.5*jcc.getElementLocalRect(contents).height,MIN_WHEEL_SCROLL_STEP))}function onEResized(){computeWheelScrollStep(),adjustScrollbars(),showScrollbars(),resetHideTimeout()}function trackVelocity(){var e=jcc.now(),t=e-timestamp;timestamp=e;var n=offsetH-frameH;frameH=offsetH;var o=offsetV-frameV;frameV=offsetV,velocityH=.8*(1e3*n/(1+t))+.2*velocityH,velocityV=.8*(1e3*o/(1+t))+.2*velocityV,continueTrackVelocity&&requestAnimationFrame(trackVelocity)}function scrollH(e){contents.scrollLeft=e,jcc.dispatchCustomEvent(contents,"scroll",{bubbles:!1,cancelable:!1}),offsetH=e,showScrollbars(),resetHideTimeout()}function scrollV(e){contents.scrollTop=e,jcc.dispatchCustomEvent(contents,"scroll",{bubbles:!1,cancelable:!1,detail:{scrollTop:e}}),offsetV=e,showScrollbars(),resetHideTimeout()}function smoothScrollEase(e){return e*(2-e)}function stopSmoothScroll(){shoothScrolling=!1,smoothScrollFrame&&(window.cancelAnimationFrame(smoothScrollFrame),smoothScrollFrame=void 0)}function performSmoothScrollStep(){smoothScrollFrame=window.requestAnimationFrame(performSmoothScrollStep);var e=(jcc.now()-smoothScrollStartTime)/WHEEL_SCROLL_SPEED,t=smoothScrollEase(e=e>1?1:e),n=startSmoothScrollLeft+(targetScrollLeft-startSmoothScrollLeft)*t,o=startSmoothScrollTop+(targetScrollTop-startSmoothScrollTop)*t;scrollH(n),scrollV(o),n===targetScrollLeft&&o===targetScrollTop&&stopSmoothScroll()}function startSmoothScroll(){smoothScrollStartTime=jcc.now(),startSmoothScrollTop=contents.scrollTop,startSmoothScrollLeft=contents.scrollLeft,performSmoothScrollStep()}function autoScroll(){var e=jcc.now()-timestamp,t=Math.exp(-e/timeConstant),n=!1;if(amplitudeH){var o=jcc.getElementLocalRect(contents);(a=-amplitudeH*t)>.5||a<-.5?(scrollH(targetScrollLeft+a),contents.scrollLeft<=0||contents.scrollLeft>=contents.scrollWidth-o.width?amplitudeH=0:n=!0):(scrollH(targetScrollLeft),amplitudeH=0),!0}if(amplitudeV){var a;o=jcc.getElementLocalRect(contents);(a=-amplitudeV*t)>.5||a<-.5?(scrollV(targetScrollTop+a),contents.scrollTop<=0||contents.scrollTop>=contents.scrollHeight-o.height?amplitudeV=0:n=!0):(scrollV(targetScrollTop),amplitudeV=0),!0}n&&requestAnimationFrame(autoScroll)}function stopAutoscroll(){kinetics&&(velocityH=amplitudeH=0,velocityV=amplitudeV=0,continueTrackVelocity=!1)}function onContentsPointerDown(e){var t,n;pressed||(stopSmoothScroll(),stopAutoscroll(),e.touches&&e.touches.length>1||"TEXTAREA"!=e.target.nodeName&&"INPUT"!=e.target.nodeName&&(e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY),movedDeltaH=0,movedDeltaV=0,pressed=!0,prevX=t,prevY=n,offsetH=contents.scrollLeft,offsetV=contents.scrollTop,kinetics&&(timestamp=jcc.now(),frameH=offsetH,frameV=offsetV,velocityH=amplitudeH=0,velocityV=amplitudeV=0,continueTrackVelocity=!0,trackVelocity())))}function onDocumentPointerMove(e){if(pressed&&!(e.touches&&e.touches.length>1)){var t,n;e.changedTouches&&e.changedTouches.length>0?(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY):(t=e.pageX,n=e.pageY);var o=prevX-t,a=prevY-n;prevX=t,prevY=n;canScrollH&&o&&(!0,movedDeltaH+=Math.abs(o),scrollH(offsetH+o)),canScrollV&&a&&(!0,movedDeltaV+=Math.abs(a),scrollV(offsetV+a)),e.preventDefault(),e.stopPropagation()}}function onWheel(e){if(canScrollV&&mouseWheel&&1!=e.ctrlKey){var t=e.wheelDelta||-e.detail;t=t<0?-1:1;var n=e.target,o=jcc.getComputedStyle(n,"overflow-y");("auto"!=o&&"scroll"!=o||!(t>0&&n.scrollTop>0||t<0&&n.scrollTop<n.scrollHeight-n.clientHeight))&&(t>0&&0==contents.scrollTop||t<0&&contents.scrollTop==contents.scrollHeight-contents.clientHeight||(stopAutoscroll(),shoothScrolling||(targetScrollTop=contents.scrollTop-t*wheelScrollStep,targetScrollLeft=contents.scrollLeft,targetScrollTop<0?targetScrollTop=0:targetScrollTop>contents.scrollHeight-contents.clientHeight&&(targetScrollTop=contents.scrollHeight-contents.clientHeight),stopSmoothScroll(),shoothScrolling=!0,startSmoothScroll()),e.preventDefault(),e.stopPropagation()))}}function onDocumentPointerUp(e){pressed&&(pressed=!1,continueTrackVelocity=!1,kinetics&&(velocityH>10||velocityH<-10||velocityV>10||velocityV<-10)&&(velocityH<-MAX_VELOCITY?velocityH=-MAX_VELOCITY:velocityH>MAX_VELOCITY&&(velocityH=MAX_VELOCITY),velocityV<-MAX_VELOCITY?velocityV=-MAX_VELOCITY:velocityV>MAX_VELOCITY&&(velocityV=MAX_VELOCITY),amplitudeH=0,amplitudeV=0,canScrollH&&(velocityH>10||velocityH<-10)&&(targetScrollLeft=offsetH+(amplitudeH=.8*velocityH)),canScrollV&&(velocityV>10||velocityV<-10)&&(targetScrollTop=offsetV+(amplitudeV=.8*velocityV)),timestamp=jcc.now(),requestAnimationFrame(autoScroll)))}function onScroll(){resetHideTimeout(),adjustScrollbars(),shoothScrolling||stopSmoothScroll(),jcc.dispatchCustomEvent(el,"e-scroll",{bubbles:!1,cancelable:!1})}function onEScroll(){el.dataset.eScroll&&el.dataset.eScroll.length>0&&eval(el.dataset.eScroll)}function onClick(e){(movedDeltaH>MOVED_THRESHOLD||movedDeltaV>MOVED_THRESHOLD)&&(movedDeltaH=movedDeltaV=0,e.preventDefault(),e.stopPropagation())}function onHScrollDrag(){stopAutoscroll(),stopSmoothScroll(),showScrollbars(),resetHideTimeout();var e=jcc.getElementLocalRect(contents),t=parseInt(hscroll.style.width),n=parseInt(hscroll.style.left);contents.scrollLeft=Math.round(n/((e.width-t)/(contents.scrollWidth-e.width)))}function onVScrollDrag(){stopAutoscroll(),stopSmoothScroll(),showScrollbars(),resetHideTimeout();var e=jcc.getElementLocalRect(contents),t=parseInt(vscroll.style.height),n=parseInt(vscroll.style.top);contents.scrollTop=Math.round(n/((e.height-t)/(contents.scrollHeight-e.height)))}this.refresh=function(){(this.destroy(),contents=el.querySelector("div:first-child"))?(el.scrollable=this,theme=this.theme(),"yes"!=el.dataset.kinetics&&"no"!=el.dataset.kinetics&&(el.dataset.kinetics="yes"),"yes"!=el.dataset.mouseWheel&&"no"!=el.dataset.mouseWheel&&(el.dataset.mouseWheel="yes"),"horizontal"!=el.dataset.scrollDirection&&"vertical"!=el.dataset.scrollDirection&&"all"!=el.dataset.scrollDirection&&(el.dataset.scrollDirection="vertical"),"top"!=el.dataset.hScrollbarLocation&&"bottom"!=el.dataset.hScrollbarLocation&&(el.dataset.hScrollbarLocation="bottom"),"left"!=el.dataset.vScrollbarLocation&&"right"!=el.dataset.vScrollbarLocation&&(el.dataset.vScrollbarLocation="right"),"always"!=el.dataset.scrollbarsVisibility&&"fade"!=el.dataset.scrollbarsVisibility&&"none"!=el.dataset.scrollbarsVisibility&&(el.dataset.scrollbarsVisibility="fade"),kinetics="yes"==el.dataset.kinetics,mouseWheel="no"!=el.dataset.mouseWheel,canScrollH="horizontal"==el.dataset.scrollDirection||"all"==el.dataset.scrollDirection,canScrollV="vertical"==el.dataset.scrollDirection||"all"==el.dataset.scrollDirection,scrollbarsVisibility="always"==el.dataset.scrollbarsVisibility?2:"fade"==el.dataset.scrollbarsVisibility?1:0,(hscroll=document.createElement("div")).classList.add("jcc-scroll"),hscroll.classList.add("jcc-h-scroll"),0==scrollbarsVisibility?hscroll.classList.add("jcc-hidden-scroll"):1==scrollbarsVisibility&&hscroll.classList.add("jcc-scroll-transparent"),(vscroll=document.createElement("div")).classList.add("jcc-scroll"),vscroll.classList.add("jcc-v-scroll"),0==scrollbarsVisibility&&vscroll.classList.add("jcc-hidden-scroll"),1==scrollbarsVisibility&&vscroll.classList.add("jcc-scroll-transparent"),el.appendChild(hscroll),el.appendChild(vscroll),canScrollH&&((hdragon=document.createElement("div")).dataset.role="dragon",hdragon.dataset.directions="h",hdragon.dataset.rectConstraint="left:0 right:0",hdragon.style.width="100%",hdragon.style.height="100%",hscroll.appendChild(hdragon),hscroll.addEventListener("e-drag",onHScrollDrag,!1),jcc.enhance(hdragon)),canScrollV&&((vdragon=document.createElement("div")).dataset.role="dragon",vdragon.dataset.directions="v",vdragon.dataset.rectConstraint="top:0 bottom:0",vdragon.style.width="100%",vdragon.style.height="100%",vscroll.appendChild(vdragon),vscroll.addEventListener("e-drag",onVScrollDrag,!1),jcc.enhance(vdragon)),contents.classList.add("jcc-contents"),el.classList.add("jcc-scrollable"),el.classList.add("jcc-scrollable-"+theme),"static"==jcc.getComputedStyle(el,"position")&&el.classList.add("jcc-scrollable-relative"),jcc.resizeMonitor.addElement(contents),computeWheelScrollStep(),pressed=!1,continueTrackVelocity=!1,adjustScrollbars(),el.addEventListener("e-scroll",onEScroll,!1),el.addEventListener("click",onClick,!0),contents.addEventListener("mousewheel",onWheel,!1),contents.addEventListener("DOMMouseScroll",onWheel,!1),contents.addEventListener("scroll",onScroll,!1),contents.addEventListener("e-resized",onEResized,!1),contents.addEventListener("touchstart",onContentsPointerDown,!1),contents.addEventListener("mousedown",onContentsPointerDown,!1),document.addEventListener("mousemove",onDocumentPointerMove,{passive:!1,capture:!1}),document.addEventListener("touchmove",onDocumentPointerMove,{passive:!1,capture:!1}),document.addEventListener("mouseup",onDocumentPointerUp,{passive:!1,capture:!1}),document.addEventListener("touchend",onDocumentPointerUp,{passive:!1,capture:!1})):alert("JCC: A 'scrollable' is missing its contents div. Please fix your HTML markup")},this.destroy=function(){el.scrollable&&(stopSmoothScroll(),stopAutoscroll(),continueTrackVelocity=!1,el.removeEventListener("e-scroll",onEScroll),el.removeEventListener("click",onClick),contents.removeEventListener("mousewheel",onWheel),contents.removeEventListener("DOMMouseScroll",onWheel),contents.removeEventListener("scroll",onScroll),contents.removeEventListener("e-resized",onEResized),contents.removeEventListener("touchstart",onContentsPointerDown),contents.removeEventListener("mousedown",onContentsPointerDown),document.removeEventListener("mousemove",onDocumentPointerMove),document.removeEventListener("touchmove",onDocumentPointerMove),document.removeEventListener("mouseup",onDocumentPointerUp),document.removeEventListener("touchend",onDocumentPointerUp),contents&&(jcc.resizeMonitor.removeElement(contents),contents.classList.remove("jcc-contents"),contents=null),el.classList.remove("jcc-scrollable-relative"),el.classList.remove("jcc-scrollable"),el.classList.remove("jcc-scrollable-"+theme),hscroll&&(hdragon&&(jcc.unenhance(hdragon),hscroll.removeChild(hdragon),hdragon=null),jcc.detach(hscroll),hscroll=null),vscroll&&(vdragon&&(jcc.unenhance(vdragon),vscroll.removeChild(vdragon),vdragon=null),jcc.detach(vscroll),vscroll=null),delete el.scrollable)},this.scrollLeft=function(){return contents?contents.scrollLeft:0},this.scrollTop=function(){return contents?contents.scrollTop:0},this.scrollTo=function(e,t){stopAutoscroll(),stopSmoothScroll(),targetScrollLeft=e,(targetScrollTop=t)<0?targetScrollTop=0:targetScrollTop>contents.scrollHeight-contents.clientHeight&&(targetScrollTop=contents.scrollHeight-contents.clientHeight),targetScrollLeft<0?targetScrollLeft=0:targetScrollLeft>contents.scrollWidth-contents.clientWidth&&(targetScrollLeft=contents.scrollWidth-contents.clientWidth),stopSmoothScroll(),shoothScrolling=!0,startSmoothScroll()},this.scrollBy=function(e,t){this.scrollTo(this.scrollLeft()+e,this.scrollTop()+t)},this.scrollToElement=function(e,t,n){var o=jcc.getElementRect(contents),a=jcc.getElementRect(e),i=0,s=0;if(t){if(a.right>o.right)i=a.right-o.right,(r=o.width-a.width)>0&&(i+=Math.floor(.3*r)),a.left-=i,a.right-=i;if(a.left<o.left)i+=a.left-o.left,(r=o.width-a.width)>0&&(i-=Math.floor(.3*r)),a.left+=i,a.right+=i}if(n){var r;if(a.bottom>o.bottom)s=a.bottom-o.bottom,(r=o.height-a.height)>0&&(s+=Math.floor(.3*r)),a.top-=s,a.bottom-=s;if(a.top<o.top)s+=a.top-o.top,(r=o.height-a.height)>0&&(s-=Math.floor(.3*r))}(t||n)&&this.scrollBy(i,s)}},jcc.widgets.tabs={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"tabs"==e.getAttribute("data-role")},enhance:function(e){e.tabs?e.tabs.refresh():new jcc.tabs(e).refresh()},unenhance:function(e){e.tabs&&e.tabs.destroy()}},jcc.tabs=function(e){this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),e.tabs=this,"flat"!=e.dataset.corners&&"smooth"!=e.dataset.corners&&(e.dataset.corners="smooth"),e.classList.add("jcc-tabs"),"static"==jcc.getComputedStyle(e,"position")&&e.classList.add("jcc-tabs-relative")},this.destroy=function(){e.tabs&&(e.classList.remove("jcc-tabs"),e.classList.remove("jcc-tabs-relative"),delete e.tabs)}},jcc.widgets.tablist={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"tablist"==e.getAttribute("data-role")},enhance:function(e){e.tablist?e.tablist.refresh():new jcc.tablist(e).refresh()},unenhance:function(e){e.tablist&&e.tablist.destroy()}},jcc.tablist=function(el){var theme,activeTab;function onEChanged(event){el.dataset.eChanged&&el.dataset.eChanged.length>0&&eval(el.dataset.eChanged)}this.scrollable=jcc.scrollable,this.scrollable(el),this.super_refresh=this.refresh,this.super_destroy=this.destroy,this.__setActiveTab=function(e){activeTab!=e&&jcc.dispatchCustomEvent(el,"e-changed",{bubbles:!1,cancelable:!1,detail:{tab:e}}),el.dataset.activeTab=activeTab=e},this.refresh=function(){if(el.parentNode.tabs){null==el.dataset.activeTab&&(el.dataset.activeTab=""),"top"!=el.dataset.position&&"bottom"!=el.dataset.position&&(el.dataset.position="top"),"yes"!=el.dataset.centerTabs&&"no"!=el.dataset.centerTabs&&(el.dataset.centerTabs="no"),el.dataset.scrollDirection="horizontal",el.dataset.scrollbarsVisibility="none",el.dataset.kinetics="yes",this.destroy(),this.super_refresh(),el.tablist=this,theme=this.theme(),this.tabsMap={};for(var e=el.querySelectorAll("label[data-role='tab']"),t=0;t<e.length;t++)this.tabsMap[e[t].id]={element:e[t],index:t};if(el.classList.add("jcc-tablist"),el.classList.add("jcc-tablist-"+theme),"yes"==el.dataset.centerTabs&&el.classList.add("jcc-tablist-center-tabs"),el.addEventListener("e-changed",onEChanged,!1),""!=el.dataset.activeTab){var n=this;setTimeout(function(){n.activeTab(el.dataset.activeTab)},0)}}else alert("JCC: A 'tablist' must be a direct child of 'tabs'. Please fix your HTML markup!")},this.destroy=function(){this.super_destroy(),el.tablist&&(el.removeEventListener("e-changed",onEChanged,!1),el.classList.remove("jcc-tablist"),el.classList.remove("jcc-tablist-"+theme),el.classList.remove("jcc-tablist-center-tabs"),delete this.tabsMap,delete el.tablist)},this.activeTab=function(){if(!(arguments.length>0))return activeTab;var e=arguments[0];if(activeTab!=e){var t=document.getElementById(e);t&&t.tab?t.click():alert("JCC: Requested tab '"+e+"' does not exist or is not enhanced by JCC!")}}},jcc.widgets.tab={version:"1.0",can_enhance:function(e){return"LABEL"==e.nodeName&&"tab"==e.getAttribute("data-role")},enhance:function(e){e.tab?e.tab.refresh():new jcc.tab(e).refresh()},unenhance:function(e){e.tab&&e.tab.destroy()}},jcc.tab=function(e){var t,n,o,a,i;function s(){if(0!=t.checked){var n=document.getElementById(o);if(n){var a=e.parentNode.parentNode.tablist;if(a)if("normal"!=e.dataset.isotope&&"subscript"!=e.dataset.isotope&&(e.dataset.isotope="normal"),"underscore"!=e.dataset.mark&&"content"!=e.dataset.mark&&(e.dataset.mark="underscore"),n.tabPage){var i=!1,s=a.activeTab();if(e.id==s)return;var r=document.getElementById(s);if(r&&r.tab){i=a.tabsMap[e.id].index<a.tabsMap[s].index;var c=r.tab.target(),l=document.getElementById(c);l&&l.tabPage&&l.tabPage.__unload(i)}n.tabPage.__load(i),a.__setActiveTab(e.id)}else{if(!n.page)return void alert("JCC: Target element must be a 'page' or a 'tabpage'. Please fix your HTML markup!");if(!n.page.isLoaded())if(""==jcc.currentHistoryState().page){var d=location.hash.substr(1),h=d.indexOf("?"),p="";h>-1&&(p=d.substr(h)),window.history.replaceState(null,"","#"+n.id+p)}else n.page.load();a.__setActiveTab(e.id)}else alert("JCC: The 'tablist' of '' cannot be found or is not enhanced by JCC! Please fix your HTML markup!")}else alert("JCC: A 'tab' target does not exist. Please fix your HTML markup!")}}function r(t){t.detail.page==o&&e.click()}this.widget=jcc.widget,this.widget(e),this.refresh=function(){e.id&&""!=e.id?e.parentNode.parentNode.tablist?e.dataset.target&&""!=e.dataset.target?(this.destroy(),e.tab=this,n=this.theme(),o=e.dataset.target,e.classList.add("jcc-tab"),e.classList.add("jcc-tab-"+n),(i=document.querySelector("div[data-role='pageview']"))&&i.addEventListener("e-changed",r,!1),(t=e.querySelector("input"))&&(t.checked=!1,t.addEventListener("change",s,!1),a=document.createElement("div"),jcc.insertAfter(a,t))):alert("JCC: A 'tab' must have non-empty 'data-target' attribute. Please fix your HTML markup!"):alert("JCC: A 'tab' must be a child of the contents of a 'tablist'. Please fix your HTML markup!"):alert("JCC: A 'tab' must have an unique 'id'. Please fix your HTML markup!")},this.destroy=function(){i&&(i.removeEventListener("e-changed",r),i=null),e.tab&&(e.classList.remove("jcc-tab"),e.classList.remove("jcc-tab-"+n),t&&(t.removeEventListener("change",s),t=null),a&&(jcc.detach(a),a=null),delete e.tab)},this.target=function(){return o}},jcc.widgets.tabview={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"tabview"==e.getAttribute("data-role")},enhance:function(e){e.tabview?e.tabview.refresh():new jcc.tabview(e).refresh()},unenhance:function(e){e.tabview&&e.tabview.destroy()}},jcc.tabview=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){e.parentNode.tabs?(this.destroy(),e.dataset.animation&&0!=e.dataset.animation.length||(e.dataset.animation="none"),e.tabview=this,t=this.theme(),e.classList.add("jcc-tabview"),e.classList.add("jcc-tabview-"+t)):alert("JCC: A 'tabview' must be a direct child of 'tabs'. Please fix your HTML markup!")},this.destroy=function(){e.tabview&&(e.classList.remove("jcc-tabview"),e.classList.remove("jcc-tabview-"+t),delete e.tabview)}},jcc.widgets["tab-page"]={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"tab-page"==e.getAttribute("data-role")},enhance:function(e){e.tabPage?e.tabPage.refresh():new jcc.tabPage(e).refresh()},unenhance:function(e){e.tabPage&&e.tabPage.destroy()}},jcc.tabPage=function(el){var loaded,animation,parentClass;function onELoad(event){el.dataset.eLoad&&el.dataset.eLoad.length>0&&eval(el.dataset.eLoad)}function onEUnload(event){el.dataset.eUnload&&el.dataset.eUnload.length>0&&eval(el.dataset.eUnload)}function onOutAnimationEnd(){el.tabPage&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),el.classList.add("jcc-tab-page-hidden"))}function removeAnimationClasses(){el.classList.remove("jcc-animation-"+animation),el.classList.remove("jcc-in"),el.classList.remove("jcc-out"),el.classList.remove("jcc-back"),parentClass&&""!=parentClass&&(el.parentNode.classList.remove(parentClass),parentClass=null)}function readAnimation(){(animation=el.dataset.animation)||(animation=el.parentNode.dataset.animation)||(animation="none"),(animation=jcc.animations[animation])?(animation=animation.suffix,parentClass=animation.parentClass):(animation="none",parentClass=null)}this.container=jcc.container,this.container(el),this.super_refresh=this.refresh,this.super_destroy=this.destroy,this.setOptions=function(e){var t=!1;for(var n in e)"number"!=typeof e[n]&&"string"!=typeof e[n]||(el.dataset[n]=e[n].toString()),"animation"!=n&&(t=!0);t&&this.refresh()},this.refresh=function(){el.id&&0!=el.id.length?"tabview"==el.parentNode.dataset.role?(this.destroy(),this.super_refresh(),el.tabPage=this,loaded=!1,el.classList.add("jcc-tab-page"),el.classList.add("jcc-tab-page-hidden"),el.addEventListener("e-load",onELoad,!1),el.addEventListener("e-unload",onEUnload,!1)):alert("JCC: A 'tab-page' can exist only as a direct child of a 'tabview'! Please fix your HTML markup!"):alert("JCC: Each 'tab-page' should have its unique 'id' attribute in the HTML markup!")},this.__load=function(e){el.tabPage&&!loaded&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),readAnimation(),"none"!=animation&&(el.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&el.parentNode.classList.add(parentClass)),el.classList.remove("jcc-tab-page-hidden"),el.classList.remove("jcc-tab-page-front"),el.classList.add("jcc-in"),e&&el.classList.add("jcc-back"),loaded=!0,jcc.dispatchCustomEvent(el,"e-load",{bubbles:!1,cancelable:!1}))},this.__unload=function(e){el.tabPage&&loaded&&(jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),readAnimation(),"none"!=animation&&(el.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&el.parentNode.classList.add(parentClass)),el.classList.add("jcc-tab-page-front"),"none"==animation?onOutAnimationEnd():(el.classList.add("jcc-out"),e&&el.classList.add("jcc-back"),0==jcc.addAnimationEndListener(el,onOutAnimationEnd,!1)&&onOutAnimationEnd()),loaded=!1,jcc.dispatchCustomEvent(el,"e-unload",{bubbles:!1,cancelable:!1}))},this.destroy=function(){this.super_destroy(),el.removeEventListener("e-load",onELoad),el.removeEventListener("e-unload",onEUnload),jcc.removeAnimationEndListener(el,onOutAnimationEnd),removeAnimationClasses(),el.tabPage&&(el.classList.remove("jcc-tab-page"),el.classList.remove("jcc-tab-page-hidden"),el.classList.remove("jcc-tab-page-front"),delete el.page)},this.isLoaded=function(){return loaded&&el.tabPage}},jcc.widgets["collapsible-set"]={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"collapsible-set"==e.getAttribute("data-role")},enhance:function(e){e.collapsibleSet?e.collapsibleSet.refresh():new jcc.collapsibleSet(e).refresh()},unenhance:function(e){e.collapsibleSet&&e.collapsibleSet.destroy()}},jcc.collapsibleSet=function(e){this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),"flat"!=e.dataset.corners&&"smooth"!=e.dataset.corners&&(e.dataset.corners="smooth"),e.collapsibleSet=this,e.classList.add("jcc-collapsible-set")},this.destroy=function(){e.collapsibleSet&&(e.classList.remove("jcc-collapsible-set"),delete e.collapsibleSet)}},jcc.widgets.collapsible={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"collapsible"==e.getAttribute("data-role")},enhance:function(e){e.collapsible?e.collapsible.refresh():new jcc.collapsible(e).refresh()},unenhance:function(e){e.collapsible&&e.collapsible.destroy()}},jcc.collapsible=function(el){this.widget=jcc.widget,this.widget(el);var VIRTUAL_VERTICAL_CONTENTS_PADDING=30,theme,contents,input,checkmark,styleMaxHeight,height,parentWidth;function __redrawState(){if(contents.classList.remove("jcc-collapsed"),input.checked){if("radio"==input.type){var e=input.name;if(""!=e)for(var t=document.querySelectorAll("input[type='radio'][name='"+e+"']"),n=0;n<t.length;n++)t[n]!=input&&t[n].parentNode&&t[n].parentNode.parentNode&&t[n].parentNode.parentNode.collapsible&&t[n].parentNode.parentNode.collapsible.expanded(!1)}contents.style.maxHeight=height+"px"}else contents.classList.add("jcc-collapsed"),contents.style.maxHeight="0"}function onInputChange(){el.dataset.expanded!=(input.checked?"yes":"no")&&(el.dataset.expanded=input.checked?"yes":"no",jcc.dispatchCustomEvent(el,"e-changed",{bubbles:!1,cancelable:!1})),__redrawState()}function onEChanged(event){el.dataset.eChanged&&el.dataset.eChanged.length>0&&eval(el.dataset.eChanged)}function onParentResize(){var e=jcc.getElementLocalRect(el.parentNode);e.width!=parentWidth&&(height=contents.scrollHeight+VIRTUAL_VERTICAL_CONTENTS_PADDING,input.checked&&__redrawState(),parentWidth=e.width)}this.refresh=function(){this.destroy(),el.collapsible=this,theme=this.theme(),"yes"!=el.dataset.expanded&&"no"!=el.dataset.expanded&&(el.dataset.expanded="no"),"yes"!=el.dataset.animated&&"no"!=el.dataset.animated&&(el.dataset.animated="yes"),"yes"!=el.dataset.arrow&&"no"!=el.dataset.arrow&&(el.dataset.arrow="yes"),"flat"!=el.dataset.corners&&"smooth"!=el.dataset.corners&&(el.dataset.corners="smooth"),"collapsible-set"==el.parentNode.dataset.role&&(el.dataset.corners=""),el.classList.add("jcc-collapsible"),el.classList.add("jcc-collapsible-"+theme),(input=el.querySelector("input"))?(contents=el.querySelector("label:first-child + div"))?(checkmark=document.createElement("div"),jcc.insertAfter(checkmark,input),checkmark.classList.add("jcc-checkmark"),el.addEventListener("e-changed",onEChanged,!1),contents.classList.add("jcc-contents"),styleMaxHeight=contents.style.maxHeight,parentWidth=jcc.getElementLocalRect(el.parentNode).width,height=contents.scrollHeight+VIRTUAL_VERTICAL_CONTENTS_PADDING,input.checked="yes"==el.dataset.expanded,onInputChange(),input.addEventListener("change",onInputChange,!1),jcc.resizeMonitor.addElement(el.parentNode),el.parentNode.addEventListener("e-resized",onParentResize,!1),"yes"==el.dataset.animated&&setTimeout(function(){contents.classList.add("jcc-animated")},0)):alert("JCC: Missing contents DIV in 'collapsible' - please fix your HTML markup!"):alert("JCC: Missing checkbox or radio input in 'collapsible' - please fix your HTML markup!")},this.destroy=function(){el.collapsible&&(jcc.resizeMonitor.removeElement(el.parentNode),el.parentNode.removeEventListener("e-resized",onParentResize),delete parentWidth,input&&(input.removeEventListener("change",onInputChange),input=null),checkmark&&(jcc.detach(checkmark),checkmark=null),contents&&(contents.classList.remove("jcc-contents"),contents.classList.remove("jcc-collapsed"),contents.classList.remove("jcc-animated"),contents.style.maxHeight=styleMaxHeight,contents=null),el.removeEventListener("e-changed",onEChanged),el.classList.remove("jcc-collapsible"),el.classList.remove("jcc-collapsible-"+theme),delete el.collapsible)},this.expanded=function(){if(!(arguments.length>0))return"yes"==el.dataset.expanded;el.dataset.expanded!=(1==arguments[0]?"yes":"no")&&(input.checked=arguments[0],onInputChange())}},jcc.widgets.fieldset={version:"1.0",can_enhance:function(e){return"FIELDSET"==e.nodeName&&"fieldset"==e.getAttribute("data-role")},enhance:function(e){e.fieldset?e.fieldset.refresh():new jcc.fieldset(e).refresh()},unenhance:function(e){e.fieldset&&e.fieldset.destroy()}},jcc.fieldset=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),e.fieldset=this,t=this.theme(),"flat"!=e.dataset.corners&&"smooth"!=e.dataset.corners&&"round"!=e.dataset.corners&&(e.dataset.corners="smooth"),"horizontal"!=e.dataset.direction&&"vertical"!=e.dataset.direction&&(e.dataset.direction="horizontal"),"yes"!=e.dataset.delimiter&&"no"!=e.dataset.delimiter&&(e.dataset.delimiter="yes"),e.classList.add("jcc-fieldset"),e.classList.add("jcc-fieldset-"+t)},this.destroy=function(){e.fieldset&&(e.classList.remove("jcc-fieldset"),e.classList.remove("jcc-fieldset-"+t),delete e.fieldset)}},jcc.widgets.list={version:"1.0",can_enhance:function(e){return"UL"==e.nodeName&&"list"==e.getAttribute("data-role")},enhance:function(e){e.list?e.list.refresh():new jcc.list(e).refresh()},unenhance:function(e){e.list&&e.list.destroy()}},jcc.list=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),e.list=this,"normal"!=e.dataset.isotope&&"inset"!=e.dataset.isotope&&(e.dataset.isotope="normal"),t=this.theme(),e.classList.add("jcc-list"),e.classList.add("jcc-list-"+t)},this.destroy=function(){e.list&&(e.classList.remove("jcc-list"),e.classList.remove("jcc-list-"+t),delete e.list)}},jcc.widgets["list-item"]={version:"1.0",can_enhance:function(e){return"LI"==e.nodeName&&"list-item"==e.getAttribute("data-role")},enhance:function(e){e.listItem?e.listItem.refresh():new jcc.listItem(e).refresh()},unenhance:function(e){e.listItem&&e.listItem.destroy()}},jcc.listItem=function(e){var t;this.widget=jcc.widget,this.widget(e),this.refresh=function(){this.destroy(),e.listItem=this,"normal"!=e.dataset.isotope&&"header"!=e.dataset.isotope&&"chevron"!=e.dataset.isotope&&(e.dataset.isotope="normal"),"yes"!=e.dataset.tap&&"no"!=e.dataset.tap&&(e.dataset.tap="no"),"yes"!=e.dataset.hDense&&"no"!=e.dataset.hDense&&(e.dataset.hDense="no"),"yes"!=e.dataset.vDense&&"no"!=e.dataset.vDense&&(e.dataset.vDense="no"),"yes"!=e.dataset.dense&&"no"!=e.dataset.dense&&(e.dataset.dense="no"),t=this.theme(),e.classList.add("jcc-list-item"),e.classList.add("jcc-list-item-"+t)},this.destroy=function(){e.listItem&&(e.classList.remove("jcc-list-item"),e.classList.remove("jcc-list-item-"+t),delete e.listItem)}},jcc.widgets.loader={version:"1.0",can_enhance:function(e){return"DIV"==e.nodeName&&"loader"==e.getAttribute("data-role")},enhance:function(e){e.loader?e.loader.refresh():new jcc.loader(e).refresh()},unenhance:function(e){e.loader&&e.list.destroy()}},jcc.loader=function(el){var theme,visibility,parent,container,label,text,bars,barHolder,offset,modal,animation,parentClass;function onEShow(event){el.dataset.eShow&&el.dataset.eShow.length>0&&eval(el.dataset.eShow)}function onEHide(event){el.dataset.eHide&&el.dataset.eHide.length>0&&eval(el.dataset.eHide)}function readOffset(){if(offset={x:0,y:0},el.dataset.offset&&el.dataset.offset.length>0){var e=el.dataset.offset.split(" ");if(e.length>0){var t=parseInt(e[0]);isNaN(t)||(offset.x=t),e.length>1&&(t=parseInt(e[1]),isNaN(t)||(offset.y=t))}}}function onOutAnimationEnd(){el.loader&&(jcc.removeAnimationEndListener(container,onOutAnimationEnd),el.classList.add("jcc-loader-hidden"))}function removeAnimationClasses(){container.classList.remove("jcc-animation-"+animation),container.classList.remove("jcc-in"),container.classList.remove("jcc-out"),container.classList.remove("jcc-back"),parentClass&&""!=parentClass&&(container.parentNode.classList.remove(parentClass),parentClass=null)}function readAnimation(){(animation=el.dataset.animation)||(animation="none"),(animation=jcc.animations[animation])?(animation=animation.suffix,parentClass=animation.parentClass):(animation="none",parentClass=null)}this.widget=jcc.widget,this.widget(el),this.setOptions=function(e){var t=!1;for(var n in e)"number"!=typeof e[n]&&"string"!=typeof e[n]||(el.dataset[n]=e[n].toString()),"animation"!=n&&(t=!0);t&&this.refresh()},this.refresh=function(){if(this.destroy(),el.loader=this,theme=this.theme(),"spinner"!=el.dataset.isotope&&"screw"!=el.dataset.isotope&&"bars"!=el.dataset.isotope&&(el.dataset.isotope="spinner"),el.dataset.animation&&0!=el.dataset.animation.length||(el.dataset.animation="none"),"no"!=el.dataset.modal&&"implicit"!=el.dataset.modal&&"explicit"!=el.dataset.modal&&(el.dataset.modal="implicit"),el.dataset.offset&&0!=el.dataset.offset.length||(el.dataset.offset="0 0"),el.dataset.anchor&&0!=el.dataset.anchor.length||(el.dataset.anchor="center center"),el.dataset.visible&&0!=el.dataset.visible.length||(el.dataset.visible="no"),null==el.dataset.text&&(el.dataset.text=""),text=null!=el.dataset.text?el.dataset.text:"",modal=el.dataset.modal,readOffset(),parent=el.parentNode,"static"==jcc.getComputedStyle(parent,"position")&&parent!=document.body&&parent.classList.add("jcc-loader-make-parent-relative"),(container=document.createElement("div")).classList.add("jcc-loader-container"),el.appendChild(container),"bars"==el.dataset.isotope){(barHolder=document.createElement("div")).classList.add("jcc-loader-barholder"),container.appendChild(barHolder),bars=[];for(var e=1;e<=5;e++){var t=document.createElement("div");t.classList.add("jcc-loader-bars"),t.classList.add("jcc-loader-bar"+e),barHolder.appendChild(t),bars.push(t)}}(label=document.createElement("div")).classList.add("jcc-loader-label"),label.innerHTML=jcc.xmlEncode(text),container.appendChild(label),container.style.marginLeft=offset.x+"px",container.style.marginTop=offset.y+"px",el.classList.add("jcc-loader"),el.classList.add("jcc-loader-"+theme),el.addEventListener("e-show",onEShow,!1),el.addEventListener("e-hide",onEHide,!1),visibility=!1,el.classList.add("jcc-loader-hidden"),this.visible("yes"==el.dataset.visible)},this.destroy=function(){if(el.loader){if(el.removeEventListener("e-show",onEShow),el.removeEventListener("e-hide",onEHide),jcc.removeAnimationEndListener(container,onOutAnimationEnd),bars){for(var e=0;e<bars.length;e++)jcc.detach(bars[e]);delete bars}label&&(jcc.detach(label),label=null),barHolder&&(jcc.detach(barHolder),barHolder=null),container&&(jcc.detach(container),container=null),parent&&(parent.classList.remove("jcc-loader-make-parent-relative"),parent=null),el.classList.remove("jcc-loader-hidden"),el.classList.remove("jcc-loader"),el.classList.remove("jcc-loader-"+theme),delete el.loader}},this.label=function(){if(!(arguments.length>0))return text;text=arguments[0],el.dataset.text=text,label&&(label.innerHTML=jcc.xmlEncode(text))},this.visible=function(){if(!(arguments.length>0))return visibility&&el.loader;var e=1==arguments[0];e!=visibility&&(el.dataset.visible=visibility=e,jcc.removeAnimationEndListener(container,onOutAnimationEnd),removeAnimationClasses(),readAnimation(),"none"!=animation&&(container.classList.add("jcc-animation-"+animation),parentClass&&""!=parentClass&&container.parentNode.classList.add(parentClass)),visibility?(el.classList.remove("jcc-loader-hidden"),container.classList.add("jcc-in"),jcc.dispatchCustomEvent(el,"e-show",{bubbles:!1,cancelable:!1})):("none"==animation?onOutAnimationEnd():(container.classList.add("jcc-out"),0==jcc.addAnimationEndListener(container,onOutAnimationEnd,!1)&&onOutAnimationEnd()),jcc.dispatchCustomEvent(el,"e-hide",{bubbles:!1,cancelable:!1})))}};